[tools]
node = "24.10.0"
pnpm = "10.18.2"

[env]
QDRANT_URL = "http://localhost:6333"

[tasks]
# === Development ===
dev = "cd frontend && pnpm dev"
"dev:functions" = "cd functions && npm run dev"
"dev:all" = "mise run dev & mise run dev:functions"

# === Build ===
build = "cd frontend && pnpm build"
"build:functions" = "cd functions && npm run build"

# === Install ===
install = "cd frontend && pnpm install && cd ../functions && npm install"

# === Firebase ===
firebase = "pnpm exec firebase"
"firebase:login" = "pnpm exec firebase login"
"firebase:deploy" = "pnpm exec firebase deploy"
"firebase:deploy:hosting" = "pnpm exec firebase deploy --only hosting"
"firebase:deploy:functions" = "pnpm exec firebase deploy --only functions"
"firebase:emulators" = "pnpm exec firebase emulators:start"

# === Local Qdrant (optional) ===
"qdrant:start" = "docker compose --profile local up -d qdrant"
"qdrant:stop" = "docker compose --profile local down"

# === Testing ===
test = "cd frontend && pnpm test"
"test:functions" = "cd functions && npm test"

# === Cleanup ===
clean = "rm -rf frontend/.nuxt frontend/.output functions/lib"
