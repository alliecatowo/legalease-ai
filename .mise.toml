[tools]
node = "24.10.0"
pnpm = "10.18.2"
python = "3.14.0"

[env]
NUXT_PUBLIC_API_BASE = "http://localhost:8000"
DATABASE_URL = "postgresql://postgres:postgres@localhost:5432/legalease"
REDIS_URL = "redis://localhost:6379/0"
QDRANT_URL = "http://localhost:6333"
MINIO_ENDPOINT = "localhost:9000"
NEO4J_URI = "bolt://localhost:7687"
OLLAMA_BASE_URL = "http://localhost:11434"

[tasks]
# Development
dev-frontend = "cd frontend && pnpm dev"
dev-backend = "cd backend && uv run uvicorn app.main:app --reload"
dev-worker = "cd backend && uv run celery -A app.workers.celery_app worker --loglevel=info"

# Docker
up = "docker compose up -d"
down = "docker compose down"
logs = "docker compose logs -f"
build = "docker compose build"

# Database - Migration
migrate = "docker compose exec backend bash -c 'cd /app && uv run alembic upgrade head'"
"migrate:down" = "docker compose exec backend bash -c 'cd /app && uv run alembic downgrade -1'"
"migrate:current" = "docker compose exec backend bash -c 'cd /app && uv run alembic current'"
"migrate:history" = "docker compose exec backend bash -c 'cd /app && uv run alembic history'"

# Database - Seeding
seed = "docker compose exec backend bash -c 'cd /app && uv run python scripts/seed_with_real_pdfs.py'"
"seed:clear" = "docker compose exec backend bash -c 'cd /app && uv run python scripts/seed_with_real_pdfs.py --clear-db'"

# Database - Old seed script (simple data)
"seed:old" = "cd backend && uv run python scripts/seed_data.py"

# Database - Admin
shell = "docker compose exec backend bash"
psql = "docker compose exec postgres psql -U legalease -d legalease"

# Logs
"logs:backend" = "docker compose logs -f backend"
"logs:worker" = "docker compose logs -f worker"
"logs:all" = "docker compose logs -f"

# Models
download-models = "./scripts/download_models.sh"
