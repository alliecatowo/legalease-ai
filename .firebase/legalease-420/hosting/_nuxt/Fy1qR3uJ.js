import{d as me,U as W,f as z,e as v,D as d,s,w as i,F as q,o as u,L as o,j as _,_ as pe,K as r,M as ve,J as D,G as ee,c as $,a as L,V as F,E as N,S as w,n as _e,Q as te}from"#entry";import{_ as fe}from"./CJ9Ym_Vo.js";import{_ as ge}from"./DYPKHOjw.js";import{_ as he}from"./zGKBPmqO.js";import{_ as ye}from"./DPqesvf7.js";import{_ as xe}from"./eM47yAaV.js";import{_ as we}from"./CDi83SG1.js";import{_ as be}from"./C0wxqGeD.js";import{_ as Ce}from"./DkGyBOcx.js";import{_ as ke}from"./BHe7gfhX.js";import{_ as ze}from"./DK_M2cpq.js";import{_ as De}from"./wOZDXjLr.js";import{_ as $e}from"./DbmbX4Z1.js";import{u as Ue}from"./CaoxetMn.js";import{u as Se}from"./BehdISRr.js";import"./DvYBZqIB.js";import"./DF6Rzu04.js";import"./sTZnGM-8.js";import"./Dip1mGGo.js";import"./CHZYgNjC.js";import"./C0IRJ9st.js";import"./BSuOfW5l.js";import"./U9gof1xZ.js";import"./CGV-9Xko.js";import"./jxpb6RCH.js";import"./CXFRORYb.js";import"./CxKOMpoR.js";import"./C6cQ_fTz.js";import"./BMuCWYOq.js";import"./BV1PiVJJ.js";import"./Cf6gTX0p.js";const Te={class:"max-w-7xl mx-auto space-y-6"},Me={key:0,class:"bg-primary/10 border border-primary rounded-lg p-4"},Ve={class:"flex items-center justify-between"},Ae={class:"flex items-center gap-3"},Be={class:"font-medium text-highlighted"},Le={class:"flex items-center gap-2"},Fe={class:"flex items-center gap-3 flex-wrap"},Ne={class:"flex-1 min-w-[240px]"},je={class:"flex items-center gap-1 border border-default rounded-lg p-1"},Ie={key:1,class:"space-y-3"},qe={class:"flex items-start gap-4"},Oe=["onClick"],Pe={class:"flex-shrink-0 p-3 bg-primary/10 rounded-lg"},Ee={class:"flex-1 min-w-0"},Ge={class:"flex items-start justify-between gap-4"},Ke={class:"flex-1 min-w-0"},Qe={class:"font-semibold text-base truncate"},Xe={class:"flex items-center gap-3 mt-1 text-sm text-muted flex-wrap"},Ye={key:0,class:"text-sm text-muted mt-2 line-clamp-2"},Ze={class:"flex items-center gap-1"},Je={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Re={class:"flex items-center justify-between"},He={class:"flex items-center gap-2"},We=["onClick"],et={class:"p-2 bg-primary/10 rounded-lg"},tt={class:"space-y-3"},lt={class:"font-semibold text-sm line-clamp-2 min-h-[2.5rem]"},at={class:"text-xs text-muted space-y-1"},st={key:0,class:"text-xs text-muted line-clamp-3"},ot={key:3,class:"text-center py-16"},it={class:"text-muted mb-6"},nt={class:"space-y-4"},rt={key:0,class:"space-y-2"},ut={class:"flex items-center justify-between text-sm"},ct={class:"font-medium text-highlighted"},dt={class:"h-2 bg-muted/20 rounded-full overflow-hidden"},mt={class:"flex justify-end gap-2"},Kt=me({__name:"index",async setup(pt){let U,S;const le=Ue(),{documents:b,cases:T}=Se();[U,S]=W(()=>b.get()),await U,S(),[U,S]=W(()=>T.get()),await U,S();const f=z(()=>b.data.value?.documents?b.data.value.documents.map(l=>({...l,document_type:l.meta_data?.document_type||l.document_type||"general",title:l.meta_data?.title||l.title||l.filename,summary:l.meta_data?.summary||l.summary,file_size:l.size||l.file_size,created_at:l.uploaded_at||l.created_at,updated_at:l.uploaded_at||l.updated_at})):[]);z(()=>b.loading.value);async function j(){await b.refresh()}const g=v(""),M=v("all"),I=v("recent"),C=v("list"),n=v(new Set),h=v(!1);v(!1);const c=v(null),m=v(0),ae=[{label:"All Documents",value:"all"},{label:"Contracts",value:"contract"},{label:"Agreements",value:"agreement"},{label:"Transcripts",value:"transcript"},{label:"Court Filings",value:"court_filing"},{label:"General",value:"general"}],se=[{label:"Most Recent",value:"recent"},{label:"Oldest First",value:"oldest"},{label:"Name (A-Z)",value:"name_asc"},{label:"Name (Z-A)",value:"name_desc"},{label:"Size (Largest)",value:"size_desc"},{label:"Size (Smallest)",value:"size_asc"}],y=z(()=>{if(!f.value)return[];let l=[...f.value];if(M.value!=="all"&&(l=l.filter(e=>e.document_type===M.value)),g.value){const e=g.value.toLowerCase();l=l.filter(a=>a.filename?.toLowerCase().includes(e)||a.title?.toLowerCase().includes(e)||a.summary?.toLowerCase().includes(e))}return l.sort((e,a)=>{switch(I.value){case"recent":return new Date(a.updated_at).getTime()-new Date(e.updated_at).getTime();case"oldest":return new Date(e.updated_at).getTime()-new Date(a.updated_at).getTime();case"name_asc":return(e.title||e.filename).localeCompare(a.title||a.filename);case"name_desc":return(a.title||a.filename).localeCompare(e.title||e.filename);case"size_desc":return(a.file_size||0)-(e.file_size||0);case"size_asc":return(e.file_size||0)-(a.file_size||0);default:return 0}}),l});z(()=>{if(!f.value)return{total:0,thisMonth:0,storage:0};const l=new Date,e=f.value.filter(a=>{const p=new Date(a.created_at);return p.getMonth()===l.getMonth()&&p.getFullYear()===l.getFullYear()});return{total:f.value.length,thisMonth:e.length,storage:f.value.reduce((a,p)=>a+(p.file_size||0),0)}});const O=z(()=>y.value.length>0&&y.value.every(l=>n.value.has(String(l.id))));function oe(){O.value?n.value.clear():y.value.forEach(l=>n.value.add(String(l.id)))}function P(l){const e=String(l);n.value.has(e)?n.value.delete(e):n.value.add(e)}async function ie(){if(!c.value||c.value.length===0)return;if(!T.data.value?.cases||T.data.value.cases.length===0){te().add({title:"No Case Available",description:"Please create a case first before uploading documents",color:"error"});return}const l=T.data.value.cases[0].id;m.value=0;const e=new FormData;c.value.forEach(a=>{e.append("files",a)});try{m.value=50,await le.documents.upload(l,e),m.value=100,te().add({title:"Upload Successful",description:`${c.value.length} document(s) uploaded successfully`,color:"success"}),h.value=!1,c.value=null,m.value=0,j()}catch(a){console.error("Upload failed:",a),m.value=0}}async function V(l){const e=Array.from(n.value);switch(l){case"delete":confirm(`Delete ${e.length} documents?`)&&(n.value.clear(),j());break}}async function E(l){console.log("Download document:",l)}async function G(l){confirm("Delete this document?")&&j()}function K(l){if(l===0)return"0 B";const e=1024,a=["B","KB","MB","GB"],p=Math.floor(Math.log(l)/Math.log(e));return Math.round(l/Math.pow(e,p)*100)/100+" "+a[p]}function Q(l){return new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const X={contract:"Contract",agreement:"Agreement",transcript:"Transcript",court_filing:"Court Filing",general:"Document"},Y={contract:"i-lucide-file-text",agreement:"i-lucide-handshake",transcript:"i-lucide-mic",court_filing:"i-lucide-gavel",general:"i-lucide-file"};return(l,e)=>{const a=ve,p=fe,x=pe,ne=ge,re=he,Z=ye,A=xe,B=we,J=be,R=Ce,H=ke,ue=ze,ce=De,de=$e;return u(),d(q,null,[s(ue,null,{header:i(()=>[s(p,{title:"Documents"},{trailing:i(()=>[s(a,{label:"Upload",icon:"i-lucide-upload",color:"primary",onClick:e[0]||(e[0]=t=>h.value=!0)})]),_:1})]),body:i(()=>[o("div",Te,[n.value.size>0?(u(),d("div",Me,[o("div",Ve,[o("div",Ae,[s(x,{name:"i-lucide-check-circle",class:"size-5 text-primary"}),o("span",Be,r(n.value.size)+" document"+r(n.value.size>1?"s":"")+" selected ",1)]),o("div",Le,[s(a,{label:"Move to Case",icon:"i-lucide-folder-plus",color:"neutral",variant:"ghost",size:"sm",onClick:e[1]||(e[1]=t=>V("move-to-case"))}),s(a,{label:"Add Tags",icon:"i-lucide-tag",color:"neutral",variant:"ghost",size:"sm",onClick:e[2]||(e[2]=t=>V("tag"))}),s(a,{label:"Download",icon:"i-lucide-download",color:"neutral",variant:"ghost",size:"sm",onClick:e[3]||(e[3]=t=>V("download"))}),s(a,{label:"Delete",icon:"i-lucide-trash",color:"error",variant:"ghost",size:"sm",onClick:e[4]||(e[4]=t=>V("delete"))}),s(ne,{orientation:"vertical",class:"h-6"}),s(a,{label:"Clear",color:"neutral",variant:"ghost",size:"sm",onClick:e[5]||(e[5]=t=>n.value.clear())})])])])):_("",!0),o("div",Fe,[s(a,{variant:"ghost",color:"neutral",size:"sm",onClick:oe},{default:i(()=>[D(r(O.value?"Deselect All":"Select All"),1)]),_:1}),o("div",Ne,[s(re,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=t=>g.value=t),icon:"i-lucide-search",placeholder:"Search documents...",size:"lg"},null,8,["modelValue"])]),s(A,null,{default:i(()=>[s(Z,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=t=>M.value=t),items:ae,size:"lg"},null,8,["modelValue"]),s(Z,{modelValue:I.value,"onUpdate:modelValue":e[8]||(e[8]=t=>I.value=t),items:se,size:"lg"},null,8,["modelValue"])]),_:1}),o("div",je,[s(a,{variant:C.value==="list"?"solid":"ghost",color:"neutral",size:"sm",icon:"i-lucide-list",onClick:e[9]||(e[9]=t=>C.value="list")},null,8,["variant"]),s(a,{variant:C.value==="grid"?"solid":"ghost",color:"neutral",size:"sm",icon:"i-lucide-grid-3x3",onClick:e[10]||(e[10]=t=>C.value="grid")},null,8,["variant"])])]),C.value==="list"?(u(),d("div",Ie,[(u(!0),d(q,null,ee(y.value,t=>(u(),$(H,{key:t.id,class:N(["hover:shadow-md transition-all cursor-pointer",n.value.has(String(t.id))?"ring-2 ring-primary":""]),onClick:k=>("navigateTo"in l?l.navigateTo:L(F))(`/documents/${t.id}`)},{default:i(()=>[o("div",qe,[o("div",{class:"flex-shrink-0 cursor-pointer p-2",onClick:w(k=>P(t.id),["stop"])},[s(x,{name:n.value.has(String(t.id))?"i-lucide-check-square":"i-lucide-square",class:N(["size-5",n.value.has(String(t.id))?"text-primary":"text-muted"])},null,8,["name","class"])],8,Oe),o("div",Pe,[s(x,{name:Y[t.document_type]||"i-lucide-file",class:"size-6 text-primary"},null,8,["name"])]),o("div",Ee,[o("div",Ge,[o("div",Ke,[o("h3",Qe,r(t.title||t.filename),1),o("div",Xe,[s(B,{color:"neutral",variant:"subtle",size:"sm"},{default:i(()=>[D(r(X[t.document_type]||"Document"),1)]),_:2},1024),o("span",null,r(K(t.file_size||0)),1),e[18]||(e[18]=o("span",null,"â€¢",-1)),o("span",null,r(Q(t.updated_at)),1),t.status?.toLowerCase()==="processing"?(u(),$(B,{key:0,color:"warning",variant:"subtle",size:"sm"},{default:i(()=>[...e[17]||(e[17]=[D(" Processing ",-1)])]),_:1})):["indexed","completed"].includes(t.status?.toLowerCase())?(u(),$(B,{key:1,color:"success",variant:"subtle",size:"sm"},{default:i(()=>[D(r(t.status?.toLowerCase()==="completed"?"Completed":"Indexed"),1)]),_:2},1024)):_("",!0)]),t.summary?(u(),d("p",Ye,r(t.summary),1)):_("",!0)]),s(A,null,{default:i(()=>[o("div",Ze,[s(J,{text:"View Document"},{default:i(()=>[s(a,{icon:"i-lucide-eye",variant:"ghost",color:"neutral",size:"sm",onClick:w(k=>("navigateTo"in l?l.navigateTo:L(F))(`/documents/${t.id}`),["stop"])},null,8,["onClick"])]),_:2},1024),s(J,{text:"Download"},{default:i(()=>[s(a,{icon:"i-lucide-download",variant:"ghost",color:"neutral",size:"sm",onClick:w(k=>E(t.id),["stop"])},null,8,["onClick"])]),_:2},1024),s(R,{items:[[{label:"Add to Case",icon:"i-lucide-folder-plus"},{label:"Add Tags",icon:"i-lucide-tag"},{label:"Share",icon:"i-lucide-share"}],[{label:"Delete",icon:"i-lucide-trash",color:"error",click:()=>G(t.id)}]]},{default:i(()=>[s(a,{icon:"i-lucide-more-vertical",variant:"ghost",color:"neutral",size:"sm",onClick:e[11]||(e[11]=w(()=>{},["stop"]))})]),_:1},8,["items"])])]),_:2},1024)])])])]),_:2},1032,["class","onClick"]))),128))])):(u(),d("div",Je,[(u(!0),d(q,null,ee(y.value,t=>(u(),$(H,{key:t.id,class:N(["hover:shadow-lg transition-all cursor-pointer relative",n.value.has(String(t.id))?"ring-2 ring-primary":""]),onClick:k=>("navigateTo"in l?l.navigateTo:L(F))(`/documents/${t.id}`)},{header:i(()=>[o("div",Re,[o("div",He,[o("div",{class:"cursor-pointer",onClick:w(k=>P(t.id),["stop"])},[s(x,{name:n.value.has(String(t.id))?"i-lucide-check-square":"i-lucide-square",class:N(["size-5",n.value.has(String(t.id))?"text-primary":"text-muted"])},null,8,["name","class"])],8,We),o("div",et,[s(x,{name:Y[t.document_type]||"i-lucide-file",class:"size-8 text-primary"},null,8,["name"])])]),s(A,null,{default:i(()=>[s(R,{items:[[{label:"View",icon:"i-lucide-eye",click:()=>("navigateTo"in l?l.navigateTo:L(F))(`/documents/${t.id}`)},{label:"Download",icon:"i-lucide-download",click:()=>E(t.id)}],[{label:"Delete",icon:"i-lucide-trash",color:"error",click:()=>G(t.id)}]]},{default:i(()=>[s(a,{icon:"i-lucide-more-vertical",variant:"ghost",color:"neutral",size:"sm",onClick:e[12]||(e[12]=w(()=>{},["stop"]))})]),_:1},8,["items"])]),_:2},1024)])]),default:i(()=>[o("div",tt,[o("div",null,[o("h3",lt,r(t.title||t.filename),1),s(B,{color:"neutral",variant:"subtle",size:"sm",class:"mt-2"},{default:i(()=>[D(r(X[t.document_type]||"Document"),1)]),_:2},1024)]),o("div",at,[o("div",null,r(K(t.file_size||0)),1),o("div",null,r(Q(t.updated_at)),1)]),t.summary?(u(),d("p",st,r(t.summary),1)):_("",!0)])]),_:2},1032,["class","onClick"]))),128))])),y.value.length?_("",!0):(u(),d("div",ot,[s(x,{name:"i-lucide-file-search",class:"size-16 text-muted mx-auto mb-4 opacity-50"}),e[19]||(e[19]=o("h3",{class:"text-xl font-semibold mb-2"},"No documents found",-1)),o("p",it,r(g.value?"Try adjusting your search or filters":"Upload your first document to get started"),1),g.value?_("",!0):(u(),$(a,{key:0,icon:"i-lucide-upload",label:"Upload Document",color:"primary",onClick:e[13]||(e[13]=t=>h.value=!0)}))]))])]),_:1}),s(A,null,{default:i(()=>[s(de,{open:h.value,"onUpdate:open":e[16]||(e[16]=t=>h.value=t),title:"Upload Documents",ui:{content:"max-w-2xl"}},{body:i(()=>[o("div",nt,[s(ce,{modelValue:c.value,"onUpdate:modelValue":e[14]||(e[14]=t=>c.value=t),multiple:"",accept:".pdf,.docx,.txt",label:"Drop your documents here",description:"PDF, DOCX, TXT (max 100MB each)",icon:"i-lucide-upload-cloud",class:"min-h-48"},null,8,["modelValue"]),m.value>0&&m.value<100?(u(),d("div",rt,[o("div",ut,[e[20]||(e[20]=o("span",{class:"text-muted"},"Uploading...",-1)),o("span",ct,r(m.value)+"%",1)]),o("div",dt,[o("div",{class:"h-full bg-primary transition-all duration-300",style:_e({width:`${m.value}%`})},null,4)])])):_("",!0)])]),footer:i(()=>[o("div",mt,[s(a,{label:"Cancel",color:"neutral",variant:"ghost",onClick:e[15]||(e[15]=t=>{h.value=!1,c.value=null})}),s(a,{label:"Upload",icon:"i-lucide-upload",color:"primary",disabled:!c.value||c.value.length===0,onClick:ie},null,8,["disabled"])])]),_:1},8,["open"])]),_:1})],64)}}});export{Kt as default};
