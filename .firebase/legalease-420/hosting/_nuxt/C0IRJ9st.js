import{aJ as z,d as I,b as J,t as Ce,g as X,aO as le,e as E,h as ne,N as Ee,aS as j,c as F,o as w,w as x,r as k,j as se,a as t,a6 as R,P as q,b5 as xe,s as re,a9 as V,S as Q,f as D,bj as Fe,p as we,q as Le,m as Y,u as ue,bk as Ae,aI as Ie}from"#entry";import{u as de}from"./BSuOfW5l.js";import{u as ke,g as qe}from"./CHZYgNjC.js";import{u as Ke}from"./U9gof1xZ.js";import{d as Se}from"./Dip1mGGo.js";import{V as Be}from"./CGV-9Xko.js";function Re(n,r,a){const l=n.findIndex(v=>z(v,r)),d=n.findIndex(v=>z(v,a));if(l===-1||d===-1)return[];const[s,c]=[l,d].sort((v,u)=>v-u);return n.slice(s,c+1)}function Te(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function Ve(n,r,a){return n===void 0?!1:Array.isArray(n)?n.some(l=>T(l,r,a)):T(n,r,a)}function T(n,r,a){return n===void 0||r===void 0?!1:typeof n=="string"?n===r:typeof a=="function"?a(n,r):typeof a=="string"?n?.[a]===r?.[a]:z(n,r)}const[Z,Pe]=J("ListboxRoot");var He=I({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:r,emit:a}){const l=n,d=a,{multiple:s,highlightOnHover:c,orientation:v,disabled:u,selectionBehavior:_,dir:y}=Ce(l),{getItems:g}=X({isProvider:!0}),{handleTypeaheadSearch:K}=Se(),{primitiveElement:P,currentElement:p}=le(),C=Te(),H=ke(y),fe=Ke(p),O=E(),S=E(!1),M=E(!0),m=ne(l,"modelValue",d,{defaultValue:l.defaultValue??(s.value?[]:void 0),passive:l.modelValue===void 0,deep:!0});function ce(e){if(S.value=!0,l.multiple){const i=Array.isArray(m.value)?[...m.value]:[],o=i.findIndex(f=>T(f,e,l.by));l.selectionBehavior==="toggle"?(o===-1?i.push(e):i.splice(o,1),m.value=i):(m.value=[e],O.value=e)}else l.selectionBehavior==="toggle"&&T(m.value,e,l.by)?m.value=void 0:m.value=e;setTimeout(()=>{S.value=!1},1)}const h=E(null),N=E(null),L=E(!1),G=E(!1),ee=j(),U=j(),te=j();function $(){return g().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function b(e,i=!0){if(!e)return;h.value=e,M.value&&h.value.focus(),i&&h.value.scrollIntoView({block:"nearest"});const o=g().find(f=>f.ref===e);d("highlight",o)}function ve(e){if(L.value)te.trigger(e);else{const i=g().find(o=>T(o.value,e,l.by));i&&(h.value=i.ref,b(i.ref))}}function pe(e){h.value&&h.value.isConnected&&(e.preventDefault(),e.stopPropagation(),G.value||h.value.click())}function me(e){if(M.value){if(S.value=!0,L.value)U.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&s.value){const o=g(),f=o.map(A=>A.value);m.value=[...f],e.preventDefault(),b(o[o.length-1].ref)}else if(!i){const o=K(e.key,g());o&&b(o)}}setTimeout(()=>{S.value=!1},1)}}function he(){G.value=!0}function ge(){R(()=>{G.value=!1})}function ae(){R(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function W(e){const i=h.value;i?.isConnected&&(N.value=i),h.value=null,d("leave",e)}function ye(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),d("entryFocus",i),!i.defaultPrevented)if(N.value)b(N.value);else{const o=$()?.[0];b(o)}}function ie(e){const i=qe(e,v.value,H.value);if(!i)return;let o=$();if(h.value){if(i==="last")o.reverse();else if(i==="prev"||i==="next"){i==="prev"&&o.reverse();const f=o.indexOf(h.value);o=o.slice(f+1)}be(e,o[0])}if(o.length){const f=!h.value&&i==="prev"?o.length-1:0;b(o[f])}if(L.value)return U.trigger(e)}function be(e,i){if(!(L.value||l.selectionBehavior!=="replace"||!s.value||!Array.isArray(m.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const f=g().filter(B=>B.ref.dataset.disabled!=="");let A=f.find(B=>B.ref===i)?.value;if(e.key===C.END?A=f[f.length-1].value:e.key===C.HOME&&(A=f[0].value),!A||!O.value)return;const _e=Re(f.map(B=>B.value),O.value,A);m.value=_e}}async function oe(e){if(await R(),L.value)ee.trigger(e);else{const i=$(),o=i.find(f=>f.dataset.state==="checked");o?b(o):i.length&&b(i[0])}}return Ee(m,()=>{S.value||R(()=>{oe()})},{immediate:!0,deep:!0}),r({highlightedElement:h,highlightItem:ve,highlightFirstItem:ae,highlightSelected:oe,getItems:g}),Pe({modelValue:m,onValueChange:ce,multiple:s,orientation:v,dir:H,disabled:u,highlightOnHover:c,highlightedElement:h,isVirtual:L,virtualFocusHook:ee,virtualKeydownHook:U,virtualHighlightHook:te,by:l.by,firstValue:O,selectionBehavior:_,focusable:M,onLeave:W,onEnter:ye,changeHighlight:b,onKeydownEnter:pe,onKeydownNavigation:ie,onKeydownTypeAhead:me,onCompositionStart:he,onCompositionEnd:ge,highlightFirstItem:ae}),(e,i)=>(w(),F(t(q),{ref_key:"primitiveElement",ref:P,as:e.as,"as-child":e.asChild,dir:t(H),"data-disabled":t(u)?"":void 0,onPointerleave:W,onFocusout:i[0]||(i[0]=async o=>{const f=o.relatedTarget||o.target;await R(),h.value&&t(p)&&!t(p).contains(f)&&W(o)})},{default:x(()=>[k(e.$slots,"default",{modelValue:t(m)}),t(fe)&&e.name?(w(),F(t(Be),{key:0,name:e.name,value:t(m),disabled:t(u),required:e.required},null,8,["name","value","disabled","required"])):se("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),et=He,Oe=I({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:r}=X(),a=Z(),l=xe(!1,10);return(d,s)=>(w(),F(t(r),null,{default:x(()=>[re(t(q),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:s[0]||(s[0]=Q(c=>l.value=!0,["left"])),onFocus:s[1]||(s[1]=c=>{t(l)||t(a).onEnter(c)}),onKeydown:[s[2]||(s[2]=V(c=>{t(a).orientation.value==="vertical"&&(c.key==="ArrowLeft"||c.key==="ArrowRight")||t(a).orientation.value==="horizontal"&&(c.key==="ArrowUp"||c.key==="ArrowDown")||(c.preventDefault(),t(a).focusable.value&&t(a).onKeydownNavigation(c))},["down","up","left","right","home","end"])),V(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:x(()=>[k(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),tt=Oe,De=I({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:r}){const a=n,d=ne(a,"modelValue",r,{defaultValue:"",passive:a.modelValue===void 0}),s=Z(),{primitiveElement:c,currentElement:v}=le(),u=D(()=>a.disabled||s.disabled.value||!1),_=E();return Fe(()=>_.value=s.highlightedElement.value?.id),we(()=>{s.focusable.value=!1,setTimeout(()=>{a.autoFocus&&v.value?.focus()},1)}),Le(()=>{s.focusable.value=!0}),(y,g)=>(w(),F(t(q),{ref_key:"primitiveElement",ref:c,as:y.as,"as-child":y.asChild,value:t(d),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":_.value,type:"text",onKeydown:[V(Q(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),V(t(s).onKeydownEnter,["enter"])],onInput:g[0]||(g[0]=K=>{d.value=K.target.value,t(s).highlightFirstItem()}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:x(()=>[k(y.$slots,"default",{modelValue:t(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),at=De;const[it,Me]=J("ListboxGroup");var Ne=I({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const r=n,a=de(void 0,"reka-listbox-group");return Me({id:a}),(l,d)=>(w(),F(t(q),Y({role:"group"},r,{"aria-labelledby":t(a)}),{default:x(()=>[k(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),ot=Ne;const Ge="listbox.select",[Ue,$e]=J("ListboxItem");var We=I({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:r}){const a=n,l=r,d=de(void 0,"reka-listbox-item"),{CollectionItem:s}=X(),{forwardRef:c,currentElement:v}=ue(),u=Z(),_=D(()=>v.value===u.highlightedElement.value),y=D(()=>Ve(u.modelValue.value,a.value,u.by)),g=D(()=>u.disabled.value||a.disabled);async function K(p){l("select",p),!p?.defaultPrevented&&!g.value&&p&&(u.onValueChange(a.value),u.changeHighlight(v.value))}function P(p){const C={originalEvent:p,value:a.value};Ie(Ge,K,C)}return $e({isSelected:y}),(p,C)=>(w(),F(t(s),{value:p.value},{default:x(()=>[Ae([_.value,y.value],()=>re(t(q),Y({id:t(d)},p.$attrs,{ref:t(c),role:"option",tabindex:t(u).focusable.value?_.value?"0":"-1":-1,"aria-selected":y.value,as:p.as,"as-child":p.asChild,disabled:g.value?"":void 0,"data-disabled":g.value?"":void 0,"data-highlighted":_.value?"":void 0,"data-state":y.value?"checked":"unchecked",onClick:P,onKeydown:V(Q(P,["prevent"]),["space"]),onPointermove:C[0]||(C[0]=H=>{t(u).highlightedElement.value!==t(v)&&(t(u).highlightOnHover.value?t(u).changeHighlight(t(v),!1):t(u).focusable.value||t(u).changeHighlight(t(v),!1))})}),{default:x(()=>[k(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),C,1)]),_:3},8,["value"]))}}),lt=We,je=I({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const r=n;ue();const a=Ue();return(l,d)=>t(a).isSelected.value?(w(),F(t(q),Y({key:0,"aria-hidden":"true"},r),{default:x(()=>[k(l.$slots,"default")]),_:3},16)):se("v-if",!0)}}),nt=je;export{et as L,tt as a,ot as b,at as c,lt as d,nt as e,it as f,Z as i};
