import{u as X}from"./CaoxetMn.js";import{aN as a,f as L}from"#entry";function ee(){const g=X(),s=a("shared-cases-data",()=>null),o=a("shared-cases-loading",()=>!1),t=a("shared-cases-error",()=>null),c=a("shared-cases-last-updated",()=>null),i=a("shared-documents-data",()=>null),u=a("shared-documents-loading",()=>!1),r=a("shared-documents-error",()=>null),d=a("shared-documents-last-updated",()=>null),v=a("shared-transcriptions-data",()=>null),f=a("shared-transcriptions-loading",()=>!1),n=a("shared-transcriptions-error",()=>null),p=a("shared-transcriptions-last-updated",()=>null),h=a("shared-forensic-exports-data",()=>null),E=a("shared-forensic-exports-loading",()=>!1),l=a("shared-forensic-exports-error",()=>null),m=a("shared-forensic-exports-last-updated",()=>null),w=300*1e3,y=async()=>{if(!o.value){o.value=!0,t.value=null;try{const e=await g.cases.list();s.value=e,c.value=Date.now()}catch(e){t.value=e instanceof Error?e:new Error("Failed to fetch cases"),console.error("Error fetching cases:",e)}finally{o.value=!1}}},S=()=>{s.value=null,c.value=null,t.value=null},U=(e=w)=>c.value?Date.now()-c.value>e:!0,$=async()=>{await y()},C=async(e=!1)=>{(e||!s.value||U())&&await y()},D=async()=>{if(!u.value){u.value=!0,r.value=null;try{const e=await g.documents.listAll();i.value=e,d.value=Date.now()}catch(e){r.value=e instanceof Error?e:new Error("Failed to fetch documents"),console.error("Error fetching documents:",e)}finally{u.value=!1}}},T=()=>{i.value=null,d.value=null,r.value=null},_=(e=w)=>d.value?Date.now()-d.value>e:!0,b=async()=>{await D()},z=async(e=!1)=>{(e||!i.value||_())&&await D()},x=async()=>{if(!f.value){f.value=!0,n.value=null;try{const e=await g.transcriptions.listAll({page:1,page_size:100});v.value=e,p.value=Date.now()}catch(e){n.value=e instanceof Error?e:new Error("Failed to fetch transcriptions"),console.error("Error fetching transcriptions:",e)}finally{f.value=!1}}},I=()=>{v.value=null,p.value=null,n.value=null},N=(e=w)=>p.value?Date.now()-p.value>e:!0,j=async()=>{await x()},P=async(e=!1)=>{(e||!v.value||N())&&await x()},A=async()=>{if(!E.value){E.value=!0,l.value=null;try{const Q=((await g.forensicExports.listAll()).exports||[]).map(F=>{const V=s.value?.cases?.find(W=>W.id===F.case_id);return{...F,case_name:V?.name||`Case ${F.case_id}`}});h.value=Q,m.value=Date.now()}catch(e){l.value=e instanceof Error?e:new Error("Failed to fetch forensic exports"),console.error("Error fetching forensic exports:",e)}finally{E.value=!1}}},H=()=>{h.value=null,m.value=null,l.value=null},O=(e=w)=>m.value?Date.now()-m.value>e:!0,k=async()=>{await A()},R=async(e=!1)=>{(e||!h.value||O())&&await A()},q=()=>{S(),T(),I(),H()},B=async()=>{await Promise.all([y(),D(),x(),A()])},G=async()=>{const e=[];s.value||e.push(C()),i.value||e.push(z()),v.value||e.push(P()),h.value||e.push(R()),e.length>0&&await Promise.all(e)},J=L(()=>o.value||u.value||f.value||E.value),K=L(()=>!!(t.value||r.value||n.value||l.value)),M=L(()=>({cases:t.value,documents:r.value,transcriptions:n.value,forensicExports:l.value}));return{cases:{data:s,loading:o,error:t,lastUpdated:c,refresh:$,invalidate:S,isStale:U,get:C},documents:{data:i,loading:u,error:r,lastUpdated:d,refresh:b,invalidate:T,isStale:_,get:z},transcriptions:{data:v,loading:f,error:n,lastUpdated:p,refresh:j,invalidate:I,isStale:N,get:P},forensicExports:{data:h,loading:E,error:l,lastUpdated:m,refresh:k,invalidate:H,isStale:O,get:R},clearAll:q,refreshAll:B,initialize:G,isAnyLoading:J,hasAnyError:K,allErrors:M}}export{ee as u};
