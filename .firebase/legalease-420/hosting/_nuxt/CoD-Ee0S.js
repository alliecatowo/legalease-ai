const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./0IHUhSKO.js","./NGcmLKcR.js","./entry.Dr1rojeF.css","./zGKBPmqO.js","./DvYBZqIB.js","./CDi83SG1.js","./C0wxqGeD.js","./Dip1mGGo.js","./jxpb6RCH.js","./BSuOfW5l.js","./BHe7gfhX.js","./CaoxetMn.js","./DlAUqK2U.js","./DocumentViewer.BB97sDAq.css"])))=>i.map(i=>d[i]);
import{H as Re,ai as Ee,y as _e,f as _,C as W,c as L,o,w as i,L as e,E as $,D as c,F as R,G as F,j as b,s,ae as Me,m as le,a as p,as as Pe,at as Ne,r as M,_ as oe,R as Oe,I as pe,J as G,K as d,P as he,d as Fe,ao as qe,$ as Ve,Q as je,U as fe,e as U,N as ve,M as Ke,W as Ge,X as We,Y as Qe,a5 as He}from"#entry";import{_ as Je}from"./DYPKHOjw.js";import{_ as Ze}from"./C0wxqGeD.js";import{_ as Xe}from"./DkGyBOcx.js";import{_ as Ye}from"./CJ9Ym_Vo.js";import{_ as et}from"./BHe7gfhX.js";import{_ as tt}from"./CDi83SG1.js";import{_ as st}from"./DpKQdomR.js";import{_ as at}from"./zGKBPmqO.js";import{_ as lt}from"./Xz0a4XdM.js";import{_ as ot}from"./DK_M2cpq.js";import{_ as it}from"./DbmbX4Z1.js";import{_ as nt}from"./eM47yAaV.js";import{u as rt}from"./CaoxetMn.js";import{u as ct}from"./BehdISRr.js";import{a as ge,u as dt}from"./ConTs2Wn.js";import"./DF6Rzu04.js";import"./Dip1mGGo.js";import"./jxpb6RCH.js";import"./BSuOfW5l.js";import"./CXFRORYb.js";import"./CxKOMpoR.js";import"./CHZYgNjC.js";import"./sTZnGM-8.js";import"./C6cQ_fTz.js";import"./BMuCWYOq.js";import"./DvYBZqIB.js";import"./Bc20tCqw.js";import"./BV1PiVJJ.js";import"./Cf6gTX0p.js";const ut={slots:{root:"relative min-w-0",list:"flex items-center gap-1.5",item:"flex min-w-0",link:"group relative flex items-center gap-1.5 text-sm min-w-0 focus-visible:outline-primary",linkLeadingIcon:"shrink-0 size-5",linkLeadingAvatar:"shrink-0",linkLeadingAvatarSize:"2xs",linkLabel:"truncate",separator:"flex",separatorIcon:"shrink-0 size-5 text-muted"},variants:{active:{true:{link:"text-primary font-semibold"},false:{link:"text-muted font-medium"}},disabled:{true:{link:"cursor-not-allowed opacity-75"}},to:{true:""}},compoundVariants:[{disabled:!1,active:!1,to:!0,class:{link:["hover:text-default","transition-colors"]}}]},mt={__name:"UBreadcrumb",props:{as:{type:null,required:!1,default:"nav"},items:{type:Array,required:!1},separatorIcon:{type:[String,Object],required:!1},labelKey:{type:null,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(f){const u=f,S=Re(),{dir:y}=Ee(),z=_e(),k=_(()=>u.separatorIcon||(y.value==="rtl"?z.ui.icons.chevronLeft:z.ui.icons.chevronRight)),h=_(()=>W({extend:W(ut),...z.ui?.breadcrumb||{}})());return(v,A)=>(o(),L(p(he),{as:f.as,"aria-label":"breadcrumb",class:$(h.value.root({class:[u.ui?.root,u.class]}))},{default:i(()=>[e("ol",{class:$(h.value.list({class:u.ui?.list}))},[(o(!0),c(R,null,F(f.items,(a,g)=>(o(),c(R,{key:g},[e("li",{class:$(h.value.item({class:[u.ui?.item,a.ui?.item]}))},[s(Me,le({ref_for:!0},p(Pe)(a),{custom:""}),{default:i(({active:Q,...H})=>[s(Ne,le({ref_for:!0},H,{as:"span","aria-current":Q&&g===f.items.length-1?"page":void 0,class:h.value.link({class:[u.ui?.link,a.ui?.link,a.class],active:g===f.items.length-1,disabled:!!a.disabled,to:!!a.to})}),{default:i(()=>[M(v.$slots,a.slot||"item",{item:a,index:g},()=>[M(v.$slots,a.slot?`${a.slot}-leading`:"item-leading",{item:a,active:g===f.items.length-1,index:g},()=>[a.icon?(o(),L(oe,{key:0,name:a.icon,class:$(h.value.linkLeadingIcon({class:[u.ui?.linkLeadingIcon,a.ui?.linkLeadingIcon],active:g===f.items.length-1}))},null,8,["name","class"])):a.avatar?(o(),L(Oe,le({key:1,size:u.ui?.linkLeadingAvatarSize||h.value.linkLeadingAvatarSize()},{ref_for:!0},a.avatar,{class:h.value.linkLeadingAvatar({class:[u.ui?.linkLeadingAvatar,a.ui?.linkLeadingAvatar],active:g===f.items.length-1})}),null,16,["size","class"])):b("",!0)]),p(pe)(a,u.labelKey)||S[a.slot?`${a.slot}-label`:"item-label"]?(o(),c("span",{key:0,class:$(h.value.linkLabel({class:[u.ui?.linkLabel,a.ui?.linkLabel]}))},[M(v.$slots,a.slot?`${a.slot}-label`:"item-label",{item:a,active:g===f.items.length-1,index:g},()=>[G(d(p(pe)(a,u.labelKey)),1)])],2)):b("",!0),M(v.$slots,a.slot?`${a.slot}-trailing`:"item-trailing",{item:a,active:g===f.items.length-1,index:g})])]),_:2},1040,["aria-current","class"])]),_:2},1040)],2),g<f.items.length-1?(o(),c("li",{key:0,role:"presentation","aria-hidden":"true",class:$(h.value.separator({class:[u.ui?.separator,a.ui?.separator]}))},[M(v.$slots,"separator",{},()=>[s(oe,{name:k.value,class:$(h.value.separatorIcon({class:[u.ui?.separatorIcon,a.ui?.separatorIcon]}))},null,8,["name","class"])])],2)):b("",!0)],64))),128))],2)]),_:3},8,["as","class"]))}},pt={base:"animate-pulse rounded-md bg-elevated"},ft={__name:"USkeleton",props:{as:{type:null,required:!1},class:{type:null,required:!1}},setup(f){const u=f,S=_e(),y=_(()=>W({extend:W(pt),...S.ui?.skeleton||{}}));return(z,k)=>(o(),L(p(he),{as:f.as,"aria-busy":"true","aria-label":"loading","aria-live":"polite",role:"alert",class:$(y.value({class:u.class}))},{default:i(()=>[M(z.$slots,"default")]),_:3},8,["as","class"]))}},vt=We(()=>Qe(()=>import("./0IHUhSKO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(f=>f.default||f)),gt={class:"flex items-center gap-3"},_t={class:"flex items-center gap-2"},ht={key:0,class:"flex items-center justify-center min-h-[60vh] p-6"},xt={class:"text-center space-y-4"},bt={key:1,class:"p-6 space-y-6"},yt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},kt={class:"lg:col-span-2 space-y-4"},wt={class:"space-y-4"},Ct={key:2,class:"max-w-7xl mx-auto p-6 space-y-6"},Dt={class:"relative overflow-hidden rounded-xl border border-default bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 p-8"},$t={class:"flex items-start gap-6"},zt={class:"flex-shrink-0 p-4 bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-default"},At={class:"flex-1 min-w-0"},Lt={class:"flex items-start justify-between gap-4 mb-3"},St={class:"flex-1 min-w-0"},It={class:"text-3xl font-bold text-highlighted mb-2 break-words"},Ut={class:"flex items-center gap-3 flex-wrap"},Bt={class:"text-sm text-muted"},Tt={class:"text-sm text-muted"},Rt={key:0,class:"flex items-center gap-2 text-sm"},Et={key:1,class:"mt-4 text-muted leading-relaxed"},Mt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Pt={class:"flex items-center gap-3"},Nt={class:"p-2 bg-primary/10 rounded-lg"},Ot={class:"text-2xl font-bold text-highlighted"},Ft={class:"flex items-center gap-3"},qt={class:"p-2 bg-info/10 rounded-lg"},Vt={class:"text-2xl font-bold text-highlighted"},jt={class:"flex items-center gap-3"},Kt={class:"p-2 bg-success/10 rounded-lg"},Gt={class:"text-2xl font-bold text-highlighted"},Wt={class:"flex items-center gap-3"},Qt={class:"p-2 bg-warning/10 rounded-lg"},Ht={class:"text-sm font-semibold text-highlighted"},Jt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Zt={class:"lg:col-span-2 space-y-4"},Xt={key:0,class:"space-y-4"},Yt={key:0,class:"mt-2 text-sm text-muted"},es={key:0,class:"min-h-[600px]"},ts={key:1},ss={key:0,class:"space-y-3"},as={key:1,class:"text-center py-12"},ls={key:2,class:"prose prose-sm dark:prose-invert max-w-none"},os={class:"whitespace-pre-wrap font-mono text-sm bg-muted/5 p-6 rounded-lg border border-default"},is={key:3,class:"text-center py-12"},ns={key:1,class:"space-y-4"},rs={class:"grid grid-cols-2 gap-4"},cs={class:"font-medium text-highlighted"},ds={class:"font-medium text-highlighted"},us={class:"font-medium text-highlighted"},ms={class:"font-medium text-highlighted"},ps={key:0,class:"space-y-3"},fs={class:"space-y-2"},vs={class:"flex-1 min-w-0"},gs={class:"text-sm font-medium text-highlighted capitalize"},_s={class:"text-sm text-muted break-words"},hs={key:2,class:"space-y-4"},xs={key:3,class:"space-y-3"},bs={key:0,class:"space-y-3"},ys={class:"flex items-center gap-3"},ks={class:"flex-1 min-w-0"},ws={class:"font-medium text-highlighted truncate"},Cs={class:"text-sm text-muted"},Ds={key:1,class:"text-center py-12"},$s={class:"space-y-4"},zs={class:"flex items-center gap-2"},As={class:"space-y-2"},Ls={class:"flex-1 min-w-0"},Ss={class:"text-sm font-medium text-highlighted truncate"},Is={class:"text-xs text-muted"},Us={class:"flex items-center gap-2"},Bs={class:"flex flex-wrap gap-2"},Ts={class:"flex items-center gap-2"},Rs={class:"space-y-3"},Es={class:"text-sm font-mono text-highlighted break-all"},Ms={class:"text-sm font-mono text-highlighted"},Ps={class:"text-sm font-mono text-highlighted"},Ns={class:"flex items-center gap-2"},Os={class:"space-y-2"},Fs={class:"space-y-4"},qs={class:"flex items-center gap-3"},Vs={class:"p-2 bg-error/10 rounded-lg"},js={class:"text-muted"},Ks={class:"text-highlighted"},Gs={class:"flex justify-end gap-2"},Ws={class:"text-center py-8"},Qs={class:"flex justify-end"},Da=Fe({__name:"[id]",async setup(f){let u,S;const y=qe(),z=Ve(),k=rt(),h=je(),v=_(()=>y.params.id),{documents:A}=ct();[u,S]=fe(()=>A.get()),await u,S();const a=_(()=>A.data.value?.documents&&A.data.value.documents.find(l=>String(l.id)===String(v.value))||null),g=A.loading,Q=_(()=>!A.loading.value&&A.data.value&&!a.value?new Error("Document not found"):A.error.value);async function H(){await A.refresh()}const{data:q,pending:xe,error:be}=([u,S]=fe(()=>dt(`document-content-${v.value}`,()=>k.documents.content(v.value),{default:()=>null})),u=await u,S(),u),{data:B}=ge(`case-${v.value}`,async()=>{if(!a.value?.case_id)return null;try{return await k.cases.get(a.value.case_id.toString())}catch(l){return console.error("Failed to load case:",l),null}},{default:()=>null,watch:[()=>a.value?.case_id]}),{data:V}=ge(`related-docs-${v.value}`,async()=>{if(!a.value?.case_id)return[];try{return(await k.documents.listByCase(a.value.case_id))?.documents?.filter(t=>t.id!==parseInt(v.value))||[]}catch(l){return console.error("Failed to load related docs:",l),[]}},{default:()=>[],watch:[()=>a.value?.case_id]}),E=U("content"),j=U(!1),P=U(!1),J=U(!1),I=U(""),w=U([]),C=U([]),Z=U(!1);y.query.q&&(I.value=String(y.query.q)),ve(()=>y.query.q,l=>{I.value=l?String(l):""});async function ye(l){if(!l||!a.value){w.value=[],C.value=[];return}Z.value=!0;try{const[t,n]=await Promise.all([k.search.hybrid({query:l,document_ids:[parseInt(v.value)],top_k:5,use_bm25:!0,use_dense:!1,score_threshold:.5}),k.search.hybrid({query:l,document_ids:[parseInt(v.value)],top_k:5,use_bm25:!0,use_dense:!0,fusion_method:"rrf",score_threshold:0})]);w.value=t.results||[],C.value=n.results||[],console.log(`[DocumentPage] ${w.value.length} BM25 (blue), ${C.value.length} fusion (yellow)`),w.value.length>0&&console.log("[DocumentPage] BM25 scores:",w.value.map(x=>x.score.toFixed(2))),C.value.length>0&&console.log("[DocumentPage] Fusion scores:",C.value.slice(0,5).map(x=>x.score.toFixed(2)))}catch(t){console.error("Search failed:",t),w.value=[],C.value=[]}finally{Z.value=!1}}const ke=He(ye,300);ve(I,l=>{l?ke(l):(w.value=[],C.value=[])},{immediate:!0});const N=_(()=>{const l=a.value?.meta_data?.document_type||"general",t={contract:{icon:"i-lucide-file-text",color:"primary",label:"Contract",iconClass:"text-primary"},agreement:{icon:"i-lucide-handshake",color:"info",label:"Agreement",iconClass:"text-info"},transcript:{icon:"i-lucide-mic",color:"warning",label:"Transcript",iconClass:"text-warning"},court_filing:{icon:"i-lucide-gavel",color:"error",label:"Court Filing",iconClass:"text-error"},brief:{icon:"i-lucide-file-pen",color:"success",label:"Brief",iconClass:"text-success"},motion:{icon:"i-lucide-file-check",color:"secondary",label:"Motion",iconClass:"text-secondary"},general:{icon:"i-lucide-file",color:"neutral",label:"Document",iconClass:"text-neutral"}};return t[l]||t.general}),K=_(()=>{const l=(a.value?.status||"pending").toLowerCase(),t={pending:{color:"warning",label:"Pending",icon:"i-lucide-clock"},processing:{color:"info",label:"Processing",icon:"i-lucide-loader-circle"},indexed:{color:"success",label:"Indexed",icon:"i-lucide-check-circle"},completed:{color:"success",label:"Completed",icon:"i-lucide-check-circle"},failed:{color:"error",label:"Failed",icon:"i-lucide-alert-circle"}};return t[l]||t.pending});function X(l){if(l===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],x=Math.floor(Math.log(l)/Math.log(t));return Math.round(l/Math.pow(t,x)*100)/100+" "+n[x]}function we(l){return new Date(l).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}const Y=_(()=>{const l=q.value?.text||"",t=l.split(/\s+/).filter(Boolean).length,n=a.value?.meta_data?.page_count||a.value?.meta_data?.pages||Math.ceil(t/300);return{wordCount:t,pageCount:n,charCount:l.length,paragraphCount:l.split(/\n\n+/).filter(Boolean).length}}),ie=_(()=>{const l=a.value?.meta_data||{},t=[];return l.parties&&Array.isArray(l.parties)&&l.parties.forEach(n=>{t.push({type:"PERSON",text:n,icon:"i-lucide-user"})}),l.court&&t.push({type:"COURT",text:l.court,icon:"i-lucide-landmark"}),l.organizations&&Array.isArray(l.organizations)&&l.organizations.forEach(n=>{t.push({type:"ORGANIZATION",text:n,icon:"i-lucide-building"})}),l.filing_date&&t.push({type:"DATE",text:new Date(l.filing_date).toLocaleDateString(),icon:"i-lucide-calendar"}),l.entities&&Array.isArray(l.entities)&&l.entities.forEach(n=>{const x=n.type==="PERSON"?"i-lucide-user":n.type==="ORGANIZATION"?"i-lucide-building":n.type==="LOCATION"?"i-lucide-map-pin":"i-lucide-tag";t.push({type:n.type,text:n.text,icon:x})}),t}),ne=_(()=>a.value?.meta_data?.tags||[]);async function ee(){try{const l=await k.documents.download(v.value),t=window.URL.createObjectURL(new Blob([l])),n=window.document.createElement("a");n.href=t,n.download=a.value?.filename||"document",n.click(),window.URL.revokeObjectURL(t),h.add({title:"Download Started",description:`Downloading ${a.value?.filename}`,color:"success",icon:"i-lucide-download"})}catch(l){console.error("Download error:",l)}}async function Ce(){if(a.value){J.value=!0;try{await k.documents.delete(v.value),h.add({title:"Document Deleted",description:`${a.value.filename} has been deleted`,color:"success",icon:"i-lucide-trash"}),z.push("/documents")}catch(l){console.error("Delete error:",l),J.value=!1}}}function re(){const l=window.location.href;navigator.clipboard.writeText(l),h.add({title:"Link Copied",description:"Document link copied to clipboard",color:"success",icon:"i-lucide-link"})}const te=_(()=>(a.value?.filename||"").split(".").pop()?.toUpperCase()||"FILE"),De=_(()=>{const l=te.value.toLowerCase();return["txt","md","json","xml","html"].includes(l)||q.value?.text}),$e=_(()=>{const l=[{label:"Documents",to:"/documents",icon:"i-lucide-folder"}];return B.value?.name&&B.value?.id&&l.push({label:B.value.name,to:`/cases/${B.value.id}`,icon:"i-lucide-briefcase"}),a.value&&l.push({label:a.value.filename||"Document",to:y.path,icon:N.value.icon}),l}),ze=_(()=>[{value:"content",label:"Content",icon:"i-lucide-file-text"},{value:"metadata",label:"Metadata",icon:"i-lucide-info"},{value:"activity",label:"Activity",icon:"i-lucide-activity"},{value:"related",label:"Related",icon:"i-lucide-link",badge:V.value?.length||0}]);return(l,t)=>{const n=Ke,x=Je,Ae=mt,se=Ze,Le=Xe,Se=Ye,m=oe,D=et,T=ft,ae=tt,ce=Ge,Ie=st,Ue=at,Be=vt,de=lt,Te=ot,ue=it,me=nt;return o(),c(R,null,[s(Te,null,{header:i(()=>[s(Se,null,{leading:i(()=>[e("div",gt,[s(n,{icon:"i-lucide-arrow-left",color:"neutral",variant:"ghost",onClick:t[0]||(t[0]=r=>p(z).back())}),s(x,{orientation:"vertical",class:"h-6"}),s(Ae,{items:$e.value},null,8,["items"])])]),trailing:i(()=>[e("div",_t,[s(se,{text:"Refresh"},{default:i(()=>[s(n,{icon:"i-lucide-refresh-cw",color:"neutral",variant:"ghost",loading:p(g),onClick:H},null,8,["loading"])]),_:1}),s(se,{text:"Download"},{default:i(()=>[s(n,{icon:"i-lucide-download",color:"neutral",variant:"ghost",onClick:ee})]),_:1}),s(se,{text:"Share"},{default:i(()=>[s(n,{icon:"i-lucide-share",color:"neutral",variant:"ghost",onClick:re})]),_:1}),s(Le,{items:[[{label:"Add to Case",icon:"i-lucide-folder-plus",click:()=>P.value=!0},{label:"Add Tags",icon:"i-lucide-tag"},{label:"Export",icon:"i-lucide-file-down"}],[{label:"Delete",icon:"i-lucide-trash",color:"error",click:()=>j.value=!0}]]},{default:i(()=>[s(n,{icon:"i-lucide-more-vertical",color:"neutral",variant:"ghost"})]),_:1},8,["items"])])]),_:1})]),body:i(()=>[Q.value?(o(),c("div",ht,[s(D,{class:"max-w-md"},{default:i(()=>[e("div",xt,[s(m,{name:"i-lucide-alert-circle",class:"size-16 text-error mx-auto"}),t[10]||(t[10]=e("h3",{class:"text-xl font-semibold"},"Document Not Found",-1)),t[11]||(t[11]=e("p",{class:"text-muted"}," The document you're looking for doesn't exist or has been deleted. ",-1)),s(n,{label:"Back to Documents",icon:"i-lucide-arrow-left",color:"primary",to:"/documents"})])]),_:1})])):p(g)?(o(),c("div",bt,[s(T,{class:"h-32 w-full"}),e("div",yt,[e("div",kt,[s(T,{class:"h-96 w-full"})]),e("div",wt,[s(T,{class:"h-48 w-full"}),s(T,{class:"h-48 w-full"})])])])):a.value?(o(),c("div",Ct,[e("div",Dt,[e("div",$t,[e("div",zt,[s(m,{name:N.value.icon,class:$(["size-16",N.value.iconClass])},null,8,["name","class"])]),e("div",At,[e("div",Lt,[e("div",St,[e("h1",It,d(a.value.meta_data?.title||a.value.filename),1),e("div",Ut,[s(ae,{label:N.value.label,color:N.value.color,variant:"soft"},null,8,["label","color"]),s(ae,{label:K.value.label,color:K.value.color,variant:"subtle"},{leading:i(()=>[s(m,{name:K.value.icon,class:$(K.value.icon.includes("loader")?"animate-spin":"")},null,8,["name","class"])]),_:1},8,["label","color"]),e("span",Bt,d(X(a.value.size)),1),e("span",Tt,d(te.value),1)])])]),p(B)?(o(),c("div",Rt,[s(m,{name:"i-lucide-briefcase",class:"size-4 text-muted"}),t[12]||(t[12]=e("span",{class:"text-muted"},"Part of case:",-1)),s(ce,{to:`/cases/${p(B).id}`,class:"text-primary hover:underline font-medium"},{default:i(()=>[G(d(p(B).name),1)]),_:1},8,["to"])])):b("",!0),a.value.meta_data?.summary?(o(),c("p",Et,d(a.value.meta_data.summary),1)):b("",!0)])])]),e("div",Mt,[s(D,null,{default:i(()=>[e("div",Pt,[e("div",Nt,[s(m,{name:"i-lucide-file-text",class:"size-5 text-primary"})]),e("div",null,[e("p",Ot,d(Y.value.pageCount),1),t[13]||(t[13]=e("p",{class:"text-sm text-muted"},"Pages",-1))])])]),_:1}),s(D,null,{default:i(()=>[e("div",Ft,[e("div",qt,[s(m,{name:"i-lucide-type",class:"size-5 text-info"})]),e("div",null,[e("p",Vt,d(Y.value.wordCount.toLocaleString()),1),t[14]||(t[14]=e("p",{class:"text-sm text-muted"},"Words",-1))])])]),_:1}),s(D,null,{default:i(()=>[e("div",jt,[e("div",Kt,[s(m,{name:"i-lucide-align-left",class:"size-5 text-success"})]),e("div",null,[e("p",Gt,d(Y.value.paragraphCount),1),t[15]||(t[15]=e("p",{class:"text-sm text-muted"},"Paragraphs",-1))])])]),_:1}),s(D,null,{default:i(()=>[e("div",Wt,[e("div",Qt,[s(m,{name:"i-lucide-calendar",class:"size-5 text-warning"})]),e("div",null,[e("p",Ht,d(new Date(a.value.uploaded_at).toLocaleDateString()),1),t[16]||(t[16]=e("p",{class:"text-sm text-muted"},"Uploaded",-1))])])]),_:1})]),e("div",Jt,[e("div",Zt,[s(D,null,{header:i(()=>[s(Ie,{modelValue:E.value,"onUpdate:modelValue":t[1]||(t[1]=r=>E.value=r),items:ze.value,content:!1},null,8,["modelValue","items"])]),default:i(()=>[E.value==="content"?(o(),c("div",Xt,[e("div",null,[s(Ue,{modelValue:I.value,"onUpdate:modelValue":t[3]||(t[3]=r=>I.value=r),icon:"i-lucide-search",placeholder:"Search within this document...",size:"lg",loading:Z.value},{trailing:i(()=>[I.value?(o(),L(n,{key:0,icon:"i-lucide-x",color:"neutral",variant:"ghost",size:"xs",onClick:t[2]||(t[2]=r=>I.value="")})):b("",!0)]),_:1},8,["modelValue","loading"]),w.value.length>0||C.value.length>0?(o(),c("div",Yt,d(w.value.length)+" BM25 (blue) + "+d(C.value.length)+" fusion (yellow) ",1)):b("",!0)]),De.value&&te.value.toLowerCase()==="pdf"?(o(),c("div",es,[s(Be,{"document-id":v.value,"search-query":I.value,"bm25-results":w.value,"fusion-results":C.value,"initial-page":parseInt(p(y).query.page)||1,"chunk-id":parseInt(p(y).query.chunk)||void 0},null,8,["document-id","search-query","bm25-results","fusion-results","initial-page","chunk-id"])])):(o(),c("div",ts,[p(xe)?(o(),c("div",ss,[s(T,{class:"h-4 w-full"}),s(T,{class:"h-4 w-5/6"}),s(T,{class:"h-4 w-4/6"})])):p(be)?(o(),c("div",as,[s(m,{name:"i-lucide-alert-circle",class:"size-12 text-error mx-auto mb-4"}),t[17]||(t[17]=e("p",{class:"text-muted"},"Failed to load document content",-1))])):p(q)?.text?(o(),c("div",ls,[e("div",os,d(p(q).text),1)])):(o(),c("div",is,[s(m,{name:"i-lucide-file-x",class:"size-12 text-muted mx-auto mb-4 opacity-50"}),t[18]||(t[18]=e("p",{class:"text-muted mb-4"},"Content preview not available for this file type",-1)),s(n,{label:"Download to View",icon:"i-lucide-download",color:"primary",onClick:ee})]))]))])):E.value==="metadata"?(o(),c("div",ns,[e("div",rs,[e("div",null,[t[19]||(t[19]=e("p",{class:"text-sm text-muted mb-1"},"Filename",-1)),e("p",cs,d(a.value.filename),1)]),e("div",null,[t[20]||(t[20]=e("p",{class:"text-sm text-muted mb-1"},"MIME Type",-1)),e("p",ds,d(a.value.mime_type||"Unknown"),1)]),e("div",null,[t[21]||(t[21]=e("p",{class:"text-sm text-muted mb-1"},"File Size",-1)),e("p",us,d(X(a.value.size)),1)]),e("div",null,[t[22]||(t[22]=e("p",{class:"text-sm text-muted mb-1"},"Uploaded",-1)),e("p",ms,d(we(a.value.uploaded_at)),1)])]),s(x),a.value.meta_data&&Object.keys(a.value.meta_data).length>0?(o(),c("div",ps,[t[23]||(t[23]=e("h4",{class:"font-semibold text-highlighted"},"Additional Information",-1)),e("div",fs,[(o(!0),c(R,null,F(Object.entries(a.value.meta_data).filter(([r])=>!["title","summary","tags","entities","parties","organizations"].includes(r)),([r,O])=>(o(),c("div",{key:r,class:"flex items-start gap-3 p-3 bg-muted/10 rounded-lg"},[s(m,{name:"i-lucide-info",class:"size-4 text-muted shrink-0 mt-0.5"}),e("div",vs,[e("p",gs,d(r.replace(/_/g," ")),1),e("p",_s,d(typeof O=="object"?JSON.stringify(O):O),1)])]))),128))])])):b("",!0)])):E.value==="activity"?(o(),c("div",hs,[s(de,{color:"info",variant:"subtle",title:"Activity Tracking Coming Soon",description:"Document activity history and edit tracking will be available in a future update.",icon:"i-lucide-info"})])):E.value==="related"?(o(),c("div",xs,[p(V)&&p(V).length>0?(o(),c("div",bs,[(o(!0),c(R,null,F(p(V).slice(0,10),r=>(o(),L(ce,{key:r.id,to:`/documents/${r.id}`,class:"block p-4 bg-muted/10 hover:bg-muted/20 rounded-lg border border-default/50 transition-colors"},{default:i(()=>[e("div",ys,[s(m,{name:"i-lucide-file-text",class:"size-5 text-muted"}),e("div",ks,[e("p",ws,d(r.filename),1),e("p",Cs,d(X(r.size||0)),1)]),s(m,{name:"i-lucide-arrow-right",class:"size-4 text-muted"})])]),_:2},1032,["to"]))),128))])):(o(),c("div",Ds,[s(m,{name:"i-lucide-link-2-off",class:"size-12 text-muted mx-auto mb-4 opacity-50"}),t[24]||(t[24]=e("p",{class:"text-muted"},"No related documents found",-1))]))])):b("",!0)]),_:1})]),e("div",$s,[ie.value.length>0?(o(),L(D,{key:0},{header:i(()=>[e("div",zs,[s(m,{name:"i-lucide-tags",class:"size-5 text-primary"}),t[25]||(t[25]=e("h3",{class:"font-semibold text-highlighted"},"Entities",-1))])]),default:i(()=>[e("div",As,[(o(!0),c(R,null,F(ie.value,(r,O)=>(o(),c("div",{key:O,class:"flex items-center gap-2 p-2 bg-muted/10 rounded-lg"},[s(m,{name:r.icon,class:"size-4 text-muted"},null,8,["name"]),e("div",Ls,[e("p",Ss,d(r.text),1),e("p",Is,d(r.type),1)])]))),128))])]),_:1})):b("",!0),ne.value.length>0?(o(),L(D,{key:1},{header:i(()=>[e("div",Us,[s(m,{name:"i-lucide-tag",class:"size-5 text-primary"}),t[26]||(t[26]=e("h3",{class:"font-semibold text-highlighted"},"Tags",-1))])]),default:i(()=>[e("div",Bs,[(o(!0),c(R,null,F(ne.value,r=>(o(),L(ae,{key:r,label:r,color:"primary",variant:"soft"},null,8,["label"]))),128))])]),_:1})):b("",!0),s(D,null,{header:i(()=>[e("div",Ts,[s(m,{name:"i-lucide-info",class:"size-5 text-primary"}),t[27]||(t[27]=e("h3",{class:"font-semibold text-highlighted"},"Document Info",-1))])]),default:i(()=>[e("div",Rs,[e("div",null,[t[28]||(t[28]=e("p",{class:"text-xs text-muted mb-1"},"File Path",-1)),e("p",Es,d(a.value.file_path),1)]),s(x),e("div",null,[t[29]||(t[29]=e("p",{class:"text-xs text-muted mb-1"},"Document ID",-1)),e("p",Ms,d(a.value.id),1)]),e("div",null,[t[30]||(t[30]=e("p",{class:"text-xs text-muted mb-1"},"Case ID",-1)),e("p",Ps,d(a.value.case_id),1)])])]),_:1}),s(D,null,{header:i(()=>[e("div",Ns,[s(m,{name:"i-lucide-zap",class:"size-5 text-primary"}),t[31]||(t[31]=e("h3",{class:"font-semibold text-highlighted"},"Quick Actions",-1))])]),default:i(()=>[e("div",Os,[s(n,{label:"Download Document",icon:"i-lucide-download",color:"primary",variant:"soft",block:"",onClick:ee}),s(n,{label:"Search Similar",icon:"i-lucide-search",color:"neutral",variant:"soft",block:"",onClick:t[4]||(t[4]=r=>p(z).push(`/search?q=${a.value.filename}`))}),s(n,{label:"Add to Case",icon:"i-lucide-folder-plus",color:"neutral",variant:"soft",block:"",onClick:t[5]||(t[5]=r=>P.value=!0)}),s(n,{label:"Share Document",icon:"i-lucide-share",color:"neutral",variant:"soft",block:"",onClick:re})])]),_:1})])])])):b("",!0)]),_:1}),s(me,null,{default:i(()=>[s(ue,{open:j.value,"onUpdate:open":t[7]||(t[7]=r=>j.value=r),title:"Delete Document"},{body:i(()=>[e("div",Fs,[e("div",qs,[e("div",Vs,[s(m,{name:"i-lucide-alert-triangle",class:"size-5 text-error"})]),e("p",js,[t[32]||(t[32]=G(" Are you sure you want to delete ",-1)),e("strong",Ks,d(a.value?.filename),1),t[33]||(t[33]=G("? This action cannot be undone. ",-1))])]),s(de,{color:"error",variant:"soft",icon:"i-lucide-info",title:"Warning",description:"All associated data and search indexes will be permanently removed."})])]),footer:i(()=>[e("div",Gs,[s(n,{label:"Cancel",color:"neutral",variant:"ghost",onClick:t[6]||(t[6]=r=>j.value=!1)}),s(n,{label:"Delete Document",icon:"i-lucide-trash",color:"error",loading:J.value,onClick:Ce},null,8,["loading"])])]),_:1},8,["open"])]),_:1}),s(me,null,{default:i(()=>[s(ue,{open:P.value,"onUpdate:open":t[9]||(t[9]=r=>P.value=r),title:"Add to Case"},{body:i(()=>[e("div",Ws,[s(m,{name:"i-lucide-folder-plus",class:"size-12 text-muted mx-auto mb-4 opacity-50"}),t[34]||(t[34]=e("p",{class:"text-muted"},"Case management coming soon",-1))])]),footer:i(()=>[e("div",Qs,[s(n,{label:"Close",color:"neutral",variant:"ghost",onClick:t[8]||(t[8]=r=>P.value=!1)})])]),_:1},8,["open"])]),_:1})],64)}}});export{Da as default};
