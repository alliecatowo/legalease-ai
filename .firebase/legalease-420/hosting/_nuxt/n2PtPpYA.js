const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OtwmhFR1.js","./NGcmLKcR.js","./entry.Dr1rojeF.css","./C0wxqGeD.js","./Dip1mGGo.js","./jxpb6RCH.js","./BSuOfW5l.js","./DPqesvf7.js","./sTZnGM-8.js","./CHZYgNjC.js","./C0IRJ9st.js","./U9gof1xZ.js","./CGV-9Xko.js","./DvYBZqIB.js","./zGKBPmqO.js"])))=>i.map(i=>d[i]);
import{f as j,a as Z,aD as Qe,N as ue,aB as Xe,aH as _e,d as Ye,ao as Je,$ as Ze,Q as et,e as z,p as tt,D as b,s as u,c as O,j as C,w as h,F as le,o as f,L as i,_ as st,K as w,M as nt,X as lt,n as Y,G as re,E as it,S as N,a9 as he,W as ot,J as at,Y as rt,a5 as ut}from"#entry";import{_ as dt}from"./DkGyBOcx.js";import{_ as ct}from"./BHe7gfhX.js";import{_ as mt}from"./C0wxqGeD.js";import{_ as ft}from"./zGKBPmqO.js";import{_ as pt}from"./4uE8Q9BU.js";import{_ as ht}from"./DPqesvf7.js";import{_ as vt}from"./Ch8iEGbY.js";import{_ as gt}from"./CDi83SG1.js";import{_ as xt}from"./CaKPpXjl.js";import{_ as yt}from"./DK_M2cpq.js";import{_ as bt}from"./jxpb6RCH.js";import{_ as _t}from"./BLyMRoDG.js";import{u as kt}from"./CaoxetMn.js";import{d as wt}from"./D9A4Js5F.js";import{_ as St}from"./DlAUqK2U.js";import"./CXFRORYb.js";import"./Dip1mGGo.js";import"./CxKOMpoR.js";import"./CHZYgNjC.js";import"./sTZnGM-8.js";import"./C6cQ_fTz.js";import"./BMuCWYOq.js";import"./BSuOfW5l.js";import"./DvYBZqIB.js";import"./C0IRJ9st.js";import"./U9gof1xZ.js";import"./CGV-9Xko.js";import"./BGmxVXu4.js";import"./Bc20tCqw.js";import"./CqOTKR6S.js";import"./C6n6dLpr.js";import"./BV1PiVJJ.js";import"./Cf6gTX0p.js";import"./DbmbX4Z1.js";import"./BbGAuGWc.js";function J(m,p,s){let l=s.initialDeps??[],n;function r(){var t,d,y,_;let v;s.key&&((t=s.debug)!=null&&t.call(s))&&(v=Date.now());const F=m();if(!(F.length!==l.length||F.some((I,E)=>l[E]!==I)))return n;l=F;let M;if(s.key&&((d=s.debug)!=null&&d.call(s))&&(M=Date.now()),n=p(...F),s.key&&((y=s.debug)!=null&&y.call(s))){const I=Math.round((Date.now()-v)*100)/100,E=Math.round((Date.now()-M)*100)/100,B=E/16,V=(W,ee)=>{for(W=String(W);W.length<ee;)W=" "+W;return W};console.info(`%c⏱ ${V(E,5)} /${V(I,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*B,120))}deg 100% 31%);`,s?.key)}return(_=s?.onChange)==null||_.call(s,n),n}return r.updateDeps=t=>{l=t},r}function ke(m,p){if(m===void 0)throw new Error("Unexpected undefined");return m}const Ct=(m,p)=>Math.abs(m-p)<1.01,zt=(m,p,s)=>{let l;return function(...n){m.clearTimeout(l),l=m.setTimeout(()=>p.apply(this,n),s)}},we=m=>{const{offsetWidth:p,offsetHeight:s}=m;return{width:p,height:s}},Mt=m=>m,Et=m=>{const p=Math.max(m.startIndex-m.overscan,0),s=Math.min(m.endIndex+m.overscan,m.count-1),l=[];for(let n=p;n<=s;n++)l.push(n);return l},$t=(m,p)=>{const s=m.scrollElement;if(!s)return;const l=m.targetWindow;if(!l)return;const n=t=>{const{width:d,height:y}=t;p({width:Math.round(d),height:Math.round(y)})};if(n(we(s)),!l.ResizeObserver)return()=>{};const r=new l.ResizeObserver(t=>{const d=()=>{const y=t[0];if(y?.borderBoxSize){const _=y.borderBoxSize[0];if(_){n({width:_.inlineSize,height:_.blockSize});return}}n(we(s))};m.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return r.observe(s,{box:"border-box"}),()=>{r.unobserve(s)}},Se={passive:!0},Ce=typeof window>"u"?!0:"onscrollend"in window,It=(m,p)=>{const s=m.scrollElement;if(!s)return;const l=m.targetWindow;if(!l)return;let n=0;const r=m.options.useScrollendEvent&&Ce?()=>{}:zt(l,()=>{p(n,!1)},m.options.isScrollingResetDelay),t=v=>()=>{const{horizontal:F,isRtl:k}=m.options;n=F?s.scrollLeft*(k&&-1||1):s.scrollTop,r(),p(n,v)},d=t(!0),y=t(!1);y(),s.addEventListener("scroll",d,Se);const _=m.options.useScrollendEvent&&Ce;return _&&s.addEventListener("scrollend",y,Se),()=>{s.removeEventListener("scroll",d),_&&s.removeEventListener("scrollend",y)}},Tt=(m,p,s)=>{if(p?.borderBoxSize){const l=p.borderBoxSize[0];if(l)return Math.round(l[s.options.horizontal?"inlineSize":"blockSize"])}return m[s.options.horizontal?"offsetWidth":"offsetHeight"]},Ot=(m,{adjustments:p=0,behavior:s},l)=>{var n,r;const t=m+p;(r=(n=l.scrollElement)==null?void 0:n.scrollTo)==null||r.call(n,{[l.options.horizontal?"left":"top"]:t,behavior:s})};class Ft{constructor(p){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const l=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(n=>{n.forEach(r=>{const t=()=>{this._measureElement(r.target,r)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}));return{disconnect:()=>{var n;(n=l())==null||n.disconnect(),s=null},observe:n=>{var r;return(r=l())==null?void 0:r.observe(n,{box:"border-box"})},unobserve:n=>{var r;return(r=l())==null?void 0:r.unobserve(n)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([l,n])=>{typeof n>"u"&&delete s[l]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Mt,rangeExtractor:Et,onChange:()=>{},measureElement:Tt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var l,n;(n=(l=this.options).onChange)==null||n.call(l,this,s)},this.maybeNotify=J(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const l=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==l){if(this.cleanup(),!l){this.maybeNotify();return}this.scrollElement=l,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=r,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,l)=>{const n=new Map,r=new Map;for(let t=l-1;t>=0;t--){const d=s[t];if(n.has(d.lane))continue;const y=r.get(d.lane);if(y==null||d.end>y.end?r.set(d.lane,d):d.end<y.end&&n.set(d.lane,!0),n.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((t,d)=>t.end===d.end?t.index-d.index:t.end-d.end)[0]:void 0},this.getMeasurementOptions=J(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(s,l,n,r,t)=>(this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:l,scrollMargin:n,getItemKey:r,enabled:t}),{key:!1}),this.getMeasurements=J(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:l,scrollMargin:n,getItemKey:r,enabled:t},d)=>{if(!t)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const y=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const _=this.measurementsCache.slice(0,y);for(let v=y;v<s;v++){const F=r(v),k=this.options.lanes===1?_[v-1]:this.getFurthestMeasurement(_,v),M=k?k.end+this.options.gap:l+n,I=d.get(F),E=typeof I=="number"?I:this.options.estimateSize(v),B=M+E,V=k?k.lane:v%this.options.lanes;_[v]={index:v,start:M,size:E,end:B,key:F,lane:V}}return this.measurementsCache=_,_},{key:!1,debug:()=>this.options.debug}),this.calculateRange=J(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,l,n,r)=>this.range=s.length>0&&l>0?Ut({measurements:s,outerSize:l,scrollOffset:n,lanes:r}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=J(()=>{let s=null,l=null;const n=this.calculateRange();return n&&(s=n.startIndex,l=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,l]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,l]},(s,l,n,r,t)=>r===null||t===null?[]:s({startIndex:r,endIndex:t,overscan:l,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const l=this.options.indexAttribute,n=s.getAttribute(l);return n?parseInt(n,10):(console.warn(`Missing attribute name '${l}={index}' on measured element.`),-1)},this._measureElement=(s,l)=>{const n=this.indexFromElement(s),r=this.measurementsCache[n];if(!r)return;const t=r.key,d=this.elementsCache.get(t);d!==s&&(d&&this.observer.unobserve(d),this.observer.observe(s),this.elementsCache.set(t,s)),s.isConnected&&this.resizeItem(n,this.options.measureElement(s,l,this))},this.resizeItem=(s,l)=>{const n=this.measurementsCache[s];if(!n)return;const r=this.itemSizeCache.get(n.key)??n.size,t=l-r;t!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,t,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=t,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,l)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((l,n)=>{l.isConnected||(this.observer.unobserve(l),this.elementsCache.delete(n))});return}this._measureElement(s,void 0)},this.getVirtualItems=J(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,l)=>{const n=[];for(let r=0,t=s.length;r<t;r++){const d=s[r],y=l[d];n.push(y)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const l=this.getMeasurements();if(l.length!==0)return ke(l[ze(0,l.length-1,n=>ke(l[n]).start,s)])},this.getOffsetForAlignment=(s,l,n=0)=>{const r=this.getSize(),t=this.getScrollOffset();l==="auto"&&(l=s>=t+r?"end":"start"),l==="center"?s+=(n-r)/2:l==="end"&&(s-=r);const d=this.getTotalSize()+this.options.scrollMargin-r;return Math.max(Math.min(d,s),0)},this.getOffsetForIndex=(s,l="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const n=this.measurementsCache[s];if(!n)return;const r=this.getSize(),t=this.getScrollOffset();if(l==="auto")if(n.end>=t+r-this.options.scrollPaddingEnd)l="end";else if(n.start<=t+this.options.scrollPaddingStart)l="start";else return[t,l];const d=l==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(d,l,n.size),l]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:l="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,l),{adjustments:void 0,behavior:n})},this.scrollToIndex=(s,{align:l="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1));let r=0;const t=10,d=_=>{if(!this.targetWindow)return;const v=this.getOffsetForIndex(s,_);if(!v){console.warn("Failed to get offset for index:",s);return}const[F,k]=v;this._scrollToOffset(F,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const M=this.getScrollOffset(),I=this.getOffsetForIndex(s,k);if(!I){console.warn("Failed to get offset for index:",s);return}Ct(I[0],M)||y(k)})},y=_=>{this.targetWindow&&(r++,r<t?this.targetWindow.requestAnimationFrame(()=>d(_)):console.warn(`Failed to scroll to index ${s} after ${t} attempts.`))};d(l)},this.scrollBy=(s,{behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:l})},this.getTotalSize=()=>{var s;const l=this.getMeasurements();let n;if(l.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((s=l[l.length-1])==null?void 0:s.end)??0;else{const r=Array(this.options.lanes).fill(null);let t=l.length-1;for(;t>=0&&r.some(d=>d===null);){const d=l[t];r[d.lane]===null&&(r[d.lane]=d.end),t--}n=Math.max(...r.filter(d=>d!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:l,behavior:n})=>{this.options.scrollToFn(s,{behavior:n,adjustments:l},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(p)}}const ze=(m,p,s,l)=>{for(;m<=p;){const n=(m+p)/2|0,r=s(n);if(r<l)m=n+1;else if(r>l)p=n-1;else return n}return m>0?m-1:0};function Ut({measurements:m,outerSize:p,scrollOffset:s,lanes:l}){const n=m.length-1,r=y=>m[y].start;if(m.length<=l)return{startIndex:0,endIndex:n};let t=ze(0,n,r,s),d=t;if(l===1)for(;d<n&&m[d].end<s+p;)d++;else if(l>1){const y=Array(l).fill(0);for(;d<n&&y.some(v=>v<s+p);){const v=m[d];y[v.lane]=v.end,d++}const _=Array(l).fill(s+p);for(;t>=0&&_.some(v=>v>=s);){const v=m[t];_[v.lane]=v.start,t--}t=Math.max(0,t-t%l),d=Math.min(n,d+(l-1-d%l))}return{startIndex:t,endIndex:d}}function At(m){const p=new Ft(Z(m)),s=Qe(p),l=p._didMount();return ue(()=>Z(m).getScrollElement(),n=>{n&&p._willUpdate()},{immediate:!0}),ue(()=>Z(m),n=>{p.setOptions({...n,onChange:(r,t)=>{var d;_e(s),(d=n.onChange)==null||d.call(n,r,t)}}),p._willUpdate(),_e(s)},{immediate:!0}),Xe(l),s}function Dt(m){return At(j(()=>({observeElementRect:$t,observeElementOffset:It,scrollToFn:Ot,...Z(m)})))}const Vt=lt(()=>rt(()=>import("./OtwmhFR1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url).then(m=>m.default||m)),jt={class:"h-16 px-4 sm:px-6 flex items-center justify-between gap-4 border-b border-default"},Kt={class:"flex items-center gap-4 min-w-0"},Wt={class:"text-xl font-semibold truncate"},Lt={key:0,class:"flex items-center gap-2 shrink-0"},Rt={class:"h-full overflow-y-auto -m-4 sm:-m-6 p-4 sm:p-6"},Nt={key:0,class:"flex items-center justify-center min-h-full p-6"},Bt={class:"text-center space-y-4"},Pt={key:1,class:"flex items-center justify-center min-h-full p-6"},qt={class:"text-center space-y-4"},Ht={class:"text-muted"},Gt={key:2,class:"space-y-6"},Qt={class:"space-y-3"},Xt={class:"flex items-center gap-3"},Yt={class:"flex items-center gap-2"},Jt={class:"flex items-center gap-2"},Zt={key:0,class:"flex items-center gap-2"},es={class:"flex flex-wrap gap-1.5"},ts={key:1,class:"text-xs text-muted"},ss=["data-index","onClick"],ns={class:"flex items-start justify-between gap-3 mb-3"},ls={class:"flex items-center gap-2 flex-wrap"},is={class:"flex items-center gap-1"},os={class:"mt-2"},as={class:"flex gap-2"},rs={key:1,class:"text-default leading-relaxed text-base line-clamp-3"},us={key:0,class:"flex flex-wrap gap-1 mt-3"},ds={key:1,class:"text-center py-20 px-6"},cs={class:"flex items-center justify-center gap-3"},ms={key:0,class:"text-lg font-semibold"},fs={key:0,class:"space-y-6"},ps={class:"flex items-center gap-2"},hs={class:"space-y-3"},vs={class:"font-medium"},gs={key:0},xs={key:1,class:"font-medium"},ys={class:"font-medium"},bs={class:"flex items-center gap-2"},_s={class:"grid grid-cols-2 gap-3"},ks={class:"p-3 bg-muted/10 rounded-lg space-y-1"},ws={class:"text-2xl font-bold text-primary"},Ss={class:"p-3 bg-muted/10 rounded-lg space-y-1"},Cs={class:"text-2xl font-bold text-primary"},zs={class:"p-3 bg-muted/10 rounded-lg space-y-1"},Ms={class:"text-2xl font-bold text-primary"},Es={class:"p-3 bg-muted/10 rounded-lg space-y-1"},$s={class:"text-2xl font-bold text-primary"},Is={key:0,class:"col-span-2 p-3 bg-muted/10 rounded-lg space-y-1"},Ts={class:"text-2xl font-bold text-warning"},Os={class:"flex items-center gap-2"},Fs={class:"space-y-3"},Us={class:"flex gap-2"},As={key:1},Ds={class:"flex items-start justify-between mb-2"},Vs={class:"flex-1 min-w-0"},js={key:0,class:"text-xs text-muted"},Ks={class:"flex items-center gap-1"},Ws={class:"space-y-1 text-xs"},Ls={class:"flex justify-between"},Rs={class:"font-medium"},Ns={class:"flex justify-between"},Bs={class:"font-medium"},Ps={class:"flex justify-between"},qs={class:"font-medium"},Hs={class:"mt-2"},Gs={class:"h-1.5 bg-muted/30 rounded-full overflow-hidden"},Qs={class:"text-xs text-muted mt-1"},Xs={class:"flex items-center gap-2"},Ys={class:"font-semibold text-lg"},Js={class:"space-y-2"},Zs=["onClick"],en={class:"flex items-center gap-2 mb-2"},tn={class:"text-sm text-default line-clamp-2"},sn={class:"flex items-center gap-2"},nn={class:"space-y-2 text-sm"},ln={key:0,class:"flex justify-between"},on={class:"font-medium"},an={key:1,class:"flex justify-between"},rn={class:"font-medium"},un={key:2,class:"flex justify-between"},dn={class:"font-medium"},cn={key:3,class:"flex justify-between"},mn={class:"font-medium"},fn={class:"flex items-center gap-2"},pn={class:"space-y-2 text-sm"},hn={class:"flex items-center justify-between"},vn={class:"flex items-center justify-between"},gn={class:"flex items-center justify-between"},xn={class:"flex items-center justify-between"},yn=Ye({__name:"[id]",setup(m){const p=Je(),s=Ze(),l=kt(),n=et(),r=j(()=>p.params.id),t=z(null),d=z(!0),y=z(null),_=z(0),v=z(!1),F=z(null),k=z(""),M=z(null),I=z(!1),E=z("smart"),B=z(!1),V=z(new Set),W=z(!1),ee=z(!1),te=z(null),q=z(""),H=z(null),G=z(""),Q=z(""),D=z(!0),de=z(null),se=z(!0),L=z(!1);async function Me(){if(!t.value||!k.value.trim()){V.value=new Set;return}B.value=!0;try{const a={query:k.value,use_bm25:!0,use_dense:!0,fusion_method:"rrf",top_k:50,chunk_types:["transcript_segment"]},e=t.value.document_id;e&&(a.document_ids=[e]);const c=await l.search.hybrid(a),S=new Set;c.results?.forEach(x=>{const A=x.metadata?.position;A!=null&&S.add(A)}),V.value=S}catch(a){console.error("Smart search failed:",a),V.value=new Set}finally{B.value=!1}}const Ee=ut(Me,500),ce=j(()=>t.value&&t.value.segments.find(e=>_.value>=e.start&&_.value<=e.end)?.id||null);ue([k,E],()=>{E.value==="smart"&&k.value.trim()?Ee():V.value=new Set}),ue(ce,a=>{if(!D.value||!a||!t.value)return;const e=g.value.findIndex(c=>c.id===a);e!==-1&&X.value&&X.value.scrollToIndex(e,{align:"center",behavior:"smooth"})});const g=j(()=>{if(!t.value)return[];let a=t.value.segments;if(k.value.trim())if(E.value==="smart")B.value||(a=a.filter((e,c)=>V.value.has(c)));else{const e=k.value.toLowerCase();a=a.filter(c=>c.text.toLowerCase().includes(e)||(U(c.speaker)?.name?.toLowerCase()||"").includes(e))}return M.value&&(a=a.filter(e=>e.speaker===M.value)),I.value&&(a=a.filter(e=>e.isKeyMoment)),a}),ve=z(null),$e=j(()=>({count:g.value.length,getScrollElement:()=>ve.value,estimateSize:()=>128,overscan:8})),X=Dt($e),Ie=j(()=>X.value.getVirtualItems()),Te=j(()=>X.value.getTotalSize());j(()=>t.value&&t.value.segments.find(a=>_.value>=a.start&&_.value<=a.end)||null);const ne=j(()=>t.value?t.value.segments.filter(a=>a.isKeyMoment):[]),R=j(()=>{if(!t.value)return null;const a=t.value.segments.reduce((c,S)=>c+S.text.split(/\s+/).length,0),e=t.value.speakers.map(c=>{const S=t.value.segments.filter(P=>P.speaker===c.id),x=S.reduce((P,T)=>P+(T.end-T.start),0),A=S.reduce((P,T)=>P+T.text.split(/\s+/).length,0);return{speaker:c,segmentCount:S.length,speakingTime:x,wordCount:A,percentage:x/t.value.duration*100}});return{totalWords:a,totalSegments:t.value.segments.length,totalSpeakers:t.value.speakers.length,duration:t.value.duration,keyMoments:ne.value.length,speakerStats:e}});function U(a){return t.value?.speakers.find(e=>e.id===a)}function ie(a){const e=Math.floor(a/3600),c=Math.floor(a%3600/60),S=Math.floor(a%60);return e>0?`${e}:${String(c).padStart(2,"0")}:${String(S).padStart(2,"0")}`:`${c}:${String(S).padStart(2,"0")}`}function ge(a){const e=Math.floor(a/3600),c=Math.floor(a%3600/60);return e>0?`${e}h ${c}m`:`${c} min`}function Oe(a){return new Date(a).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function oe(a,e=!1){F.value=a,_.value=a.start,e&&(de.value=a.id,setTimeout(()=>{de.value=null},1e3),D.value||(D.value=!0));const c=g.value.findIndex(S=>S.id===a.id);c!==-1&&X.value&&X.value.scrollToIndex(c,{align:"center"})}function Fe(a){if(!t.value)return;const e=t.value.segments.find(c=>a>=c.start&&a<c.end);e&&oe(e,!0)}async function Ue(a){if(!t.value)return;const e=t.value.segments.find(S=>S.id===a);if(!e)return;const c=!e.isKeyMoment;try{e.isKeyMoment=c,await l.transcriptions.toggleKeyMoment(t.value.id,a,c),n.add({title:c?"Marked as key moment":"Removed key moment",color:"success"})}catch(S){e.isKeyMoment=!c,n.add({title:"Failed to update key moment",description:S.message||"An error occurred",color:"error"})}}async function me(a){if(t.value){ee.value=!0,W.value=!1;try{const e=await l.transcriptions.export(t.value.id,a),c=new Blob([e],{type:Ae(a)}),S=window.URL.createObjectURL(c),x=document.createElement("a");x.href=S,x.download=`${t.value.title}.${a}`,document.body.appendChild(x),x.click(),window.URL.revokeObjectURL(S),document.body.removeChild(x),n.add({title:"Export successful",description:`Transcript exported as ${a.toUpperCase()}`,color:"success"})}catch{n.add({title:"Export failed",description:"Unable to export transcript",color:"error"})}finally{ee.value=!1}}}function Ae(a){return{docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",srt:"text/plain",vtt:"text/vtt"}[a]||"text/plain"}async function De(){if(!t.value)return;let a=`${t.value.title}

`;t.value.segments.forEach(e=>{const S=U(e.speaker)?.name||"Unknown",x=ie(e.start);a+=`[${x}] ${S}: ${e.text}

`}),await navigator.clipboard.writeText(a),n.add({title:"Copied to clipboard",description:"Full transcript copied",color:"success"})}async function Ve(a){const c=U(a.speaker)?.name||"Unknown",x=`[${ie(a.start)}] ${c}: ${a.text}`;await navigator.clipboard.writeText(x),n.add({title:"Copied to clipboard",description:"Segment copied",color:"success"})}function je(a){te.value=a.id,q.value=a.text}function xe(a){if(!t.value)return;const e=t.value.segments.find(c=>c.id===a);e&&(e.text=q.value,n.add({title:"Segment updated",color:"success"})),te.value=null,q.value=""}function fe(){te.value=null,q.value=""}function Ke(a){H.value=a.id,G.value=a.name,Q.value=a.role||""}async function ye(){if(!t.value||!H.value)return;const a=H.value,e=t.value.speakers.find(x=>x.id===a);if(!e)return;const c=e.name,S=e.role;try{e.name=G.value,e.role=Q.value||void 0,H.value=null,G.value="",Q.value="",await l.transcriptions.updateSpeaker(t.value.id,a,{name:e.name,role:e.role}),n.add({title:"Speaker updated",description:`Updated ${e.name}`,color:"success"})}catch(x){e.name=c,e.role=S,n.add({title:"Failed to update speaker",description:x.message||"An error occurred",color:"error"})}}function We(){H.value=null,G.value="",Q.value=""}async function Le(){if(!(!t.value||!confirm(`Are you sure you want to delete "${t.value.title}"? This action cannot be undone.`)))try{await l.transcriptions.delete(t.value.id),n.add({title:"Transcription deleted",description:"The transcription has been permanently deleted",color:"success"}),s.push("/transcripts")}catch(e){n.add({title:"Failed to delete transcription",description:e.message||"An error occurred",color:"error"})}}async function be(){d.value=!0,y.value=null;try{const a=await l.transcriptions.get(r.value);t.value={...a,audioUrl:a.audio_url||null}}catch(a){y.value=a.message||"Failed to load transcript",console.error("Error loading transcript:",a)}finally{d.value=!1}}return wt({space:{usingInput:!1,handler:()=>{v.value=!v.value}},meta_f:{handler:()=>{document.querySelector('input[placeholder*="Search"]')?.focus()}},escape:{handler:()=>{te.value?fe():(k.value="",M.value=null,I.value=!1,E.value="smart")}},a:{usingInput:!1,handler:()=>{D.value=!D.value}}}),tt(async()=>{await be()}),(a,e)=>{const c=nt,S=dt,x=st,A=ct,P=Vt,T=mt,pe=ft,Re=pt,Ne=ht,Be=vt,K=gt,Pe=xt,qe=yt,He=ot,ae=bt,Ge=_t;return f(),b(le,null,[u(qe,{id:"transcript-main",resizable:""},{header:h(()=>[i("div",jt,[i("div",Kt,[u(c,{icon:"i-lucide-arrow-left",color:"neutral",variant:"ghost",onClick:e[0]||(e[0]=o=>Z(s).push("/transcripts"))}),i("h1",Wt,w(t.value?.title||"Transcript"),1)]),t.value?(f(),b("div",Lt,[u(c,{icon:"i-lucide-copy",color:"neutral",variant:"ghost",label:"Copy All",onClick:De}),u(S,{items:[[{label:"Download Original Audio",icon:"i-lucide-music",click:async()=>{const o=t.value?.audioUrl;if(o){const $=a.document.createElement("a");$.href=o,$.download=`${t.value.title}.mp3`,$.click()}else Z(n).add({title:"Audio not available",description:"No audio file found for this transcript",color:"warning"})}},{label:"Export as DOCX",icon:"i-lucide-file-text",click:()=>me("docx")},{label:"Export as SRT",icon:"i-lucide-captions",click:()=>me("srt")},{label:"Export as VTT",icon:"i-lucide-captions",click:()=>me("vtt")}],[{label:"Delete Transcription",icon:"i-lucide-trash-2",click:Le,class:"text-error"}]]},{default:h(()=>[u(c,{icon:"i-lucide-download",color:"primary",loading:ee.value,label:"Export"},null,8,["loading"])]),_:1},8,["items"]),u(c,{icon:se.value?"i-lucide-panel-right-close":"i-lucide-panel-right-open",color:"neutral",variant:"ghost",onClick:e[1]||(e[1]=o=>se.value=!se.value)},null,8,["icon"])])):C("",!0)])]),body:h(()=>[i("div",Rt,[d.value?(f(),b("div",Nt,[i("div",Bt,[u(x,{name:"i-lucide-loader-circle",class:"size-12 text-primary animate-spin mx-auto"}),e[24]||(e[24]=i("div",null,[i("h3",{class:"text-lg font-semibold"},"Loading transcript..."),i("p",{class:"text-sm text-muted"},"Please wait while we fetch your transcript")],-1))])])):y.value?(f(),b("div",Pt,[u(A,{class:"max-w-md"},{default:h(()=>[i("div",qt,[u(x,{name:"i-lucide-alert-circle",class:"size-16 text-error mx-auto"}),i("div",null,[e[25]||(e[25]=i("h3",{class:"text-xl font-bold text-highlighted mb-2"},"Error Loading Transcript",-1)),i("p",Ht,w(y.value),1)]),u(c,{label:"Try Again",icon:"i-lucide-refresh-cw",color:"primary",onClick:be})])]),_:1})])):t.value?(f(),b("div",Gt,[t.value.audioUrl?(f(),O(P,{key:0,"audio-url":t.value.audioUrl,"transcription-id":t.value.id,"current-time":_.value,segments:t.value.segments,"selected-segment-id":F.value?.id,"key-moments":ne.value,"onUpdate:currentTime":e[2]||(e[2]=o=>_.value=o),"onUpdate:isPlaying":e[3]||(e[3]=o=>v.value=o),onSegmentClick:oe,onWaveformClick:Fe},null,8,["audio-url","transcription-id","current-time","segments","selected-segment-id","key-moments"])):C("",!0),i("div",Qt,[i("div",Xt,[u(T,{text:D.value?"Click to stop following (or press A)":"Click to follow along (or press A)"},{default:h(()=>[u(c,{icon:D.value?"i-lucide-radio":"i-lucide-circle",label:D.value?"Following":"Paused",color:D.value?"primary":"neutral",variant:D.value?"solid":"outline",size:"sm",onClick:e[4]||(e[4]=o=>D.value=!D.value)},null,8,["icon","label","color","variant"])]),_:1},8,["text"]),u(pe,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=o=>k.value=o),icon:"i-lucide-search",placeholder:"Search in transcript... (Cmd+F)",class:"flex-1",size:"md"},{trailing:h(()=>[k.value?(f(),O(c,{key:0,icon:"i-lucide-x",color:"neutral",variant:"ghost",size:"xs",onClick:e[5]||(e[5]=o=>k.value="")})):C("",!0)]),_:1},8,["modelValue"]),k.value?(f(),O(Re,{key:0},{default:h(()=>[u(T,{text:"Smart Search (AI-powered semantic + keyword matching)"},{default:h(()=>[u(c,{icon:"i-lucide-sparkles",color:E.value==="smart"?"primary":"neutral",variant:E.value==="smart"?"soft":"ghost",label:"Smart",size:"sm",onClick:e[7]||(e[7]=o=>E.value="smart")},null,8,["color","variant"])]),_:1}),u(T,{text:"Keyword Search (Exact BM25 text matching)"},{default:h(()=>[u(c,{icon:"i-lucide-search",color:E.value==="keyword"?"warning":"neutral",variant:E.value==="keyword"?"soft":"ghost",label:"Keyword",size:"sm",onClick:e[8]||(e[8]=o=>E.value="keyword")},null,8,["color","variant"])]),_:1})]),_:1})):C("",!0),u(Ne,{modelValue:M.value,"onUpdate:modelValue":e[9]||(e[9]=o=>M.value=o),items:[{label:"All Speakers",value:null},...t.value.speakers.map(o=>({label:o.name,value:o.id}))],placeholder:"Filter by speaker",class:"min-w-[200px]"},{label:h(()=>[i("div",Yt,[u(x,{name:"i-lucide-users",class:"size-4"}),i("span",null,w(M.value?U(M.value)?.name:"All Speakers"),1)])]),_:1},8,["modelValue","items"]),u(Be,{modelValue:I.value,"onUpdate:modelValue":e[10]||(e[10]=o=>I.value=o),label:"Key Moments Only"},{label:h(()=>[i("div",Jt,[u(x,{name:"i-lucide-star",class:"size-4"}),e[26]||(e[26]=i("span",null,"Key Moments",-1))])]),_:1},8,["modelValue"])]),k.value||M.value||I.value?(f(),b("div",Zt,[e[27]||(e[27]=i("span",{class:"text-xs text-muted"},"Active filters:",-1)),i("div",es,[k.value?(f(),O(K,{key:0,label:`Search: ${k.value}`,color:E.value==="keyword"?"warning":"primary",variant:"soft",size:"sm"},{leading:h(()=>[u(x,{name:E.value==="smart"?"i-lucide-sparkles":"i-lucide-search",class:"size-3"},null,8,["name"])]),trailing:h(()=>[u(x,{name:"i-lucide-x",class:"size-3 cursor-pointer",onClick:e[11]||(e[11]=o=>k.value="")})]),_:1},8,["label","color"])):C("",!0),M.value?(f(),O(K,{key:1,label:`Speaker: ${U(M.value)?.name}`,color:"info",variant:"soft",size:"sm"},{trailing:h(()=>[u(x,{name:"i-lucide-x",class:"size-3 cursor-pointer",onClick:e[12]||(e[12]=o=>M.value=null)})]),_:1},8,["label"])):C("",!0),I.value?(f(),O(K,{key:2,label:"Key Moments",color:"warning",variant:"soft",size:"sm"},{trailing:h(()=>[u(x,{name:"i-lucide-x",class:"size-3 cursor-pointer",onClick:e[13]||(e[13]=o=>I.value=!1)})]),_:1})):C("",!0)]),u(c,{label:"Clear All",color:"neutral",variant:"ghost",size:"xs",onClick:e[14]||(e[14]=o=>{k.value="",M.value=null,I.value=!1,E.value="smart"})})])):C("",!0),g.value.length!==t.value.segments.length?(f(),b("div",ts," Showing "+w(g.value.length)+" of "+w(t.value.segments.length)+" segments ",1)):C("",!0)]),i("div",null,[i("div",{ref_key:"scrollContainerRef",ref:ve,class:"overflow-y-auto max-h-[60vh]","data-transcript-container":""},[g.value.length>0?(f(),b("div",{key:0,style:Y({height:`${Te.value}px`,width:"100%",position:"relative"})},[(f(!0),b(le,null,re(Ie.value,o=>(f(),b("div",{key:o.key,"data-index":o.index,style:Y({position:"absolute",top:0,left:0,transform:`translateY(${o.start}px)`,width:"100%",height:"120px",marginBottom:"8px"}),class:it(["p-4 rounded-lg cursor-pointer overflow-hidden transition-colors duration-200",{"bg-primary/10 border-l-4 border-primary shadow-sm":g.value[o.index].id===ce.value,"hover:bg-muted/30":g.value[o.index].id!==ce.value,"animate-pulse bg-warning/20":g.value[o.index].id===de.value}]),onClick:$=>_.value=g.value[o.index].start},[i("div",ns,[i("div",ls,[u(c,{label:ie(g.value[o.index].start),icon:"i-lucide-clock",color:"neutral",variant:"soft",size:"xs",onClick:N($=>oe(g.value[o.index]),["stop"])},null,8,["label","onClick"]),U(g.value[o.index].speaker)?(f(),b("div",{key:0,class:"px-3 py-1 rounded-full text-sm font-medium",style:Y({backgroundColor:U(g.value[o.index].speaker).color+"20",color:U(g.value[o.index].speaker).color})},w(U(g.value[o.index].speaker).name),5)):(f(),O(K,{key:1,label:"Unknown Speaker",color:"neutral",size:"xs",variant:"soft"})),g.value[o.index].isKeyMoment?(f(),O(K,{key:2,label:"Key Moment",icon:"i-lucide-star",color:"warning",size:"xs"})):C("",!0),g.value[o.index].confidence?(f(),O(T,{key:3,text:`Confidence: ${Math.round(g.value[o.index].confidence*100)}%`},{default:h(()=>[u(K,{label:`${Math.round(g.value[o.index].confidence*100)}%`,color:g.value[o.index].confidence>.9?"success":g.value[o.index].confidence>.7?"warning":"neutral",size:"xs",variant:"subtle"},null,8,["label","color"])]),_:2},1032,["text"])):C("",!0)]),i("div",is,[u(T,{text:g.value[o.index].isKeyMoment?"Remove Key Moment":"Mark as Key Moment"},{default:h(()=>[u(c,{icon:"i-lucide-star",color:g.value[o.index].isKeyMoment?"warning":"neutral",variant:"ghost",size:"xs",onClick:N($=>Ue(g.value[o.index].id),["stop"])},null,8,["color","onClick"])]),_:2},1032,["text"]),u(T,{text:"Copy Segment"},{default:h(()=>[u(c,{icon:"i-lucide-copy",color:"neutral",variant:"ghost",size:"xs",onClick:N($=>Ve(g.value[o.index]),["stop"])},null,8,["onClick"])]),_:2},1024),u(T,{text:"Edit Text"},{default:h(()=>[u(c,{icon:"i-lucide-edit",color:"neutral",variant:"ghost",size:"xs",onClick:N($=>je(g.value[o.index]),["stop"])},null,8,["onClick"])]),_:2},1024)])]),i("div",os,[te.value===g.value[o.index].id?(f(),b("div",{key:0,class:"space-y-2",onClick:e[16]||(e[16]=N(()=>{},["stop"]))},[u(Pe,{modelValue:q.value,"onUpdate:modelValue":e[15]||(e[15]=$=>q.value=$),autofocus:"",rows:"3",onKeydown:[he(N($=>xe(g.value[o.index].id),["meta"]),["enter"]),he(fe,["esc"])]},null,8,["modelValue","onKeydown"]),i("div",as,[u(c,{label:"Save",icon:"i-lucide-check",color:"primary",size:"xs",onClick:$=>xe(g.value[o.index].id)},null,8,["onClick"]),u(c,{label:"Cancel",icon:"i-lucide-x",color:"neutral",variant:"ghost",size:"xs",onClick:fe})])])):(f(),b("p",rs,w(g.value[o.index].text),1))]),g.value[o.index].tags&&g.value[o.index].tags.length>0?(f(),b("div",us,[(f(!0),b(le,null,re(g.value[o.index].tags,$=>(f(),O(K,{key:$,label:$,color:"neutral",size:"xs",variant:"outline"},null,8,["label"]))),128))])):C("",!0)],14,ss))),128))],4)):(f(),b("div",ds,[u(x,{name:"i-lucide-search-x",class:"size-16 text-muted mx-auto mb-4 opacity-30"}),e[28]||(e[28]=i("h3",{class:"text-xl font-semibold mb-2"},"No segments found",-1)),e[29]||(e[29]=i("p",{class:"text-muted mb-4"},"Try adjusting your filters or search query",-1)),u(c,{label:"Clear Filters",icon:"i-lucide-x",color:"neutral",onClick:e[17]||(e[17]=o=>{k.value="",M.value=null,I.value=!1,E.value="smart"})})]))],512)])])):C("",!0)])]),_:1}),t.value?(f(),O(Ge,{key:0,id:"transcript-metadata",open:se.value,"onUpdate:open":e[22]||(e[22]=o=>se.value=o),collapsed:L.value,"onUpdate:collapsed":e[23]||(e[23]=o=>L.value=o),side:"right",resizable:"",collapsible:"","min-size":20,"max-size":40,"default-size":25},{header:h(()=>[i("div",cs,[u(T,{text:L.value?"Show metadata":"Hide metadata"},{default:h(()=>[u(c,{icon:L.value?"i-lucide-info":"i-lucide-x",color:"neutral",variant:"ghost",size:"md",onClick:e[18]||(e[18]=o=>L.value=!L.value)},null,8,["icon"])]),_:1},8,["text"]),L.value?C("",!0):(f(),b("h2",ms,"Metadata"))])]),default:h(()=>[L.value?C("",!0):(f(),b("div",fs,[u(A,null,{header:h(()=>[i("div",ps,[u(x,{name:"i-lucide-info",class:"size-5 text-primary"}),e[30]||(e[30]=i("h3",{class:"font-semibold text-lg"},"Information",-1))])]),default:h(()=>[i("div",hs,[i("div",null,[e[31]||(e[31]=i("p",{class:"text-xs text-muted mb-1"},"Title",-1)),i("p",vs,w(t.value.title),1)]),t.value.caseName?(f(),b("div",gs,[e[32]||(e[32]=i("p",{class:"text-xs text-muted mb-1"},"Case",-1)),t.value.caseId?(f(),O(He,{key:0,to:`/cases/${t.value.caseId}`,class:"font-medium text-primary hover:underline"},{default:h(()=>[at(w(t.value.caseName),1)]),_:1},8,["to"])):(f(),b("p",xs,w(t.value.caseName),1))])):C("",!0),i("div",null,[e[33]||(e[33]=i("p",{class:"text-xs text-muted mb-1"},"Created",-1)),i("p",ys,w(Oe(t.value.createdAt)),1)]),i("div",null,[e[34]||(e[34]=i("p",{class:"text-xs text-muted mb-1"},"Status",-1)),u(K,{label:t.value.status,color:t.value.status==="completed"?"success":t.value.status==="processing"?"warning":"error",variant:"soft",class:"capitalize"},null,8,["label","color"])])])]),_:1}),R.value?(f(),O(A,{key:0},{header:h(()=>[i("div",bs,[u(x,{name:"i-lucide-bar-chart",class:"size-5 text-primary"}),e[35]||(e[35]=i("h3",{class:"font-semibold text-lg"},"Statistics",-1))])]),default:h(()=>[i("div",_s,[i("div",ks,[i("p",ws,w(ge(R.value.duration)),1),e[36]||(e[36]=i("p",{class:"text-xs text-muted"},"Duration",-1))]),i("div",Ss,[i("p",Cs,w(R.value.totalWords),1),e[37]||(e[37]=i("p",{class:"text-xs text-muted"},"Words",-1))]),i("div",zs,[i("p",Ms,w(R.value.totalSpeakers),1),e[38]||(e[38]=i("p",{class:"text-xs text-muted"},"Speakers",-1))]),i("div",Es,[i("p",$s,w(R.value.totalSegments),1),e[39]||(e[39]=i("p",{class:"text-xs text-muted"},"Segments",-1))]),R.value.keyMoments>0?(f(),b("div",Is,[i("p",Ts,w(R.value.keyMoments),1),e[40]||(e[40]=i("p",{class:"text-xs text-muted"},"Key Moments",-1))])):C("",!0)])]),_:1})):C("",!0),u(A,null,{header:h(()=>[i("div",Os,[u(x,{name:"i-lucide-users",class:"size-5 text-primary"}),e[41]||(e[41]=i("h3",{class:"font-semibold text-lg"},"Speakers",-1))])]),default:h(()=>[i("div",Fs,[(f(!0),b(le,null,re(R.value?.speakerStats,o=>(f(),b("div",{key:o.speaker.id,class:"p-3 bg-muted/10 rounded-lg"},[H.value===o.speaker.id?(f(),b("div",{key:0,class:"space-y-2",onClick:e[21]||(e[21]=N(()=>{},["stop"]))},[u(pe,{modelValue:G.value,"onUpdate:modelValue":e[19]||(e[19]=$=>G.value=$),placeholder:"Speaker name",size:"sm",autofocus:""},null,8,["modelValue"]),u(pe,{modelValue:Q.value,"onUpdate:modelValue":e[20]||(e[20]=$=>Q.value=$),placeholder:"Role (optional)",size:"sm",onKeydown:he(ye,["enter"])},null,8,["modelValue"]),i("div",Us,[u(c,{label:"Save",icon:"i-lucide-check",color:"primary",size:"xs",onClick:ye}),u(c,{label:"Cancel",icon:"i-lucide-x",color:"neutral",variant:"ghost",size:"xs",onClick:We})])])):(f(),b("div",As,[i("div",Ds,[i("div",Vs,[i("div",{class:"px-2 py-1 rounded text-xs font-medium inline-block mb-1",style:Y({backgroundColor:o.speaker.color+"20",color:o.speaker.color})},w(o.speaker.name),5),o.speaker.role?(f(),b("p",js,w(o.speaker.role),1)):C("",!0)]),i("div",Ks,[u(T,{text:"Edit Speaker"},{default:h(()=>[u(c,{icon:"i-lucide-edit",color:"neutral",variant:"ghost",size:"xs",onClick:N($=>Ke(o.speaker),["stop"])},null,8,["onClick"])]),_:2},1024),u(T,{text:"Filter by Speaker"},{default:h(()=>[u(c,{icon:"i-lucide-filter",color:"neutral",variant:"ghost",size:"xs",onClick:$=>M.value=o.speaker.id},null,8,["onClick"])]),_:2},1024)])]),i("div",Ws,[i("div",Ls,[e[42]||(e[42]=i("span",{class:"text-muted"},"Speaking time",-1)),i("span",Rs,w(ge(o.speakingTime)),1)]),i("div",Ns,[e[43]||(e[43]=i("span",{class:"text-muted"},"Segments",-1)),i("span",Bs,w(o.segmentCount),1)]),i("div",Ps,[e[44]||(e[44]=i("span",{class:"text-muted"},"Words",-1)),i("span",qs,w(o.wordCount),1)]),i("div",Hs,[i("div",Gs,[i("div",{class:"h-full rounded-full",style:Y({width:`${o.percentage}%`,backgroundColor:o.speaker.color})},null,4)]),i("p",Qs,w(o.percentage.toFixed(1))+"% of total",1)])])]))]))),128))])]),_:1}),ne.value.length>0?(f(),O(A,{key:1},{header:h(()=>[i("div",Xs,[u(x,{name:"i-lucide-star",class:"size-5 text-warning"}),i("h3",Ys,"Key Moments ("+w(ne.value.length)+")",1)])]),default:h(()=>[i("div",Js,[(f(!0),b(le,null,re(ne.value,o=>(f(),b("div",{key:o.id,class:"p-3 bg-yellow-500/5 border border-yellow-500/20 rounded-lg cursor-pointer hover:bg-yellow-500/10 transition-colors",onClick:$=>oe(o)},[i("div",en,[u(K,{label:ie(o.start),color:"warning",size:"xs",variant:"soft"},null,8,["label"]),U(o.speaker)?(f(),b("div",{key:0,class:"px-2 py-0.5 rounded text-xs font-medium",style:Y({backgroundColor:U(o.speaker).color+"20",color:U(o.speaker).color})},w(U(o.speaker).name),5)):C("",!0)]),i("p",tn,w(o.text),1)],8,Zs))),128))])]),_:1})):C("",!0),t.value.metadata?(f(),O(A,{key:2},{header:h(()=>[i("div",sn,[u(x,{name:"i-lucide-file-audio",class:"size-5 text-primary"}),e[45]||(e[45]=i("h3",{class:"font-semibold text-lg"},"Audio Details",-1))])]),default:h(()=>[i("div",nn,[t.value.metadata.format?(f(),b("div",ln,[e[46]||(e[46]=i("span",{class:"text-muted"},"Format",-1)),i("span",on,w(t.value.metadata.format),1)])):C("",!0),t.value.metadata.fileSize?(f(),b("div",an,[e[47]||(e[47]=i("span",{class:"text-muted"},"File Size",-1)),i("span",rn,w((t.value.metadata.fileSize/1024/1024).toFixed(2))+" MB",1)])):C("",!0),t.value.metadata.sampleRate?(f(),b("div",un,[e[48]||(e[48]=i("span",{class:"text-muted"},"Sample Rate",-1)),i("span",dn,w(t.value.metadata.sampleRate)+" Hz",1)])):C("",!0),t.value.metadata.bitRate?(f(),b("div",cn,[e[49]||(e[49]=i("span",{class:"text-muted"},"Bit Rate",-1)),i("span",mn,w(t.value.metadata.bitRate)+" kbps",1)])):C("",!0)])]),_:1})):C("",!0),u(A,null,{header:h(()=>[i("div",fn,[u(x,{name:"i-lucide-keyboard",class:"size-5 text-primary"}),e[50]||(e[50]=i("h3",{class:"font-semibold text-lg"},"Keyboard Shortcuts",-1))])]),default:h(()=>[i("div",pn,[i("div",hn,[e[51]||(e[51]=i("span",{class:"text-muted"},"Play/Pause",-1)),u(ae,{value:"Space"})]),i("div",vn,[e[52]||(e[52]=i("span",{class:"text-muted"},"Search",-1)),u(ae,{value:"⌘F"})]),i("div",gn,[e[53]||(e[53]=i("span",{class:"text-muted"},"Follow/Unfollow",-1)),u(ae,{value:"A"})]),i("div",xn,[e[54]||(e[54]=i("span",{class:"text-muted"},"Clear Filters",-1)),u(ae,{value:"Esc"})])])]),_:1})]))]),_:1},8,["open","collapsed"])):C("",!0)],64)}}}),sl=St(yn,[["__scopeId","data-v-df96c4fa"]]);export{sl as default};
