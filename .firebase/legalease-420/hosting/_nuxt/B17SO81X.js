import{d as oe,ao as le,$ as ie,Q as ae,f as L,e as f,p as ne,D as c,s,w as n,F as z,o as d,L as e,j as u,_ as re,K as i,M as de,a as K,c as v,J as h,G as M,E as ce}from"#entry";import{_ as ue}from"./CJ9Ym_Vo.js";import{_ as me}from"./BHe7gfhX.js";import{_ as pe}from"./CDi83SG1.js";import{_ as xe}from"./Di12GvVr.js";import{_ as _e}from"./Xz0a4XdM.js";import{_ as fe}from"./DK_M2cpq.js";import{_ as ve}from"./DbmbX4Z1.js";import{_ as he}from"./eM47yAaV.js";import{u as ge}from"./CaoxetMn.js";import"./DvYBZqIB.js";import"./BV1PiVJJ.js";import"./sTZnGM-8.js";import"./BSuOfW5l.js";import"./CxKOMpoR.js";import"./Cf6gTX0p.js";const ye={key:0,class:"flex items-center gap-2"},be={class:"max-w-7xl mx-auto space-y-6"},ke={key:0,class:"flex items-center justify-center py-20"},we={class:"text-center space-y-4"},ze={key:1,class:"flex items-center justify-center h-full"},Ee={class:"text-center space-y-4"},De={class:"text-muted"},Ce={class:"bg-gradient-to-br from-primary/10 via-secondary/5 to-transparent rounded-xl p-8 border border-default"},je={class:"flex items-start justify-between gap-6 flex-wrap mb-6"},$e={class:"flex items-start gap-4 flex-1 min-w-0"},Fe={class:"p-4 bg-primary/20 rounded-xl"},Ue={class:"flex-1 min-w-0"},Be={class:"flex items-center gap-3 flex-wrap mb-2"},Te={class:"text-3xl font-bold text-highlighted"},Se={class:"flex items-center gap-4 text-muted mb-3 flex-wrap"},Le={key:0,class:"flex items-center gap-2"},Me={class:"font-mono text-xs"},Ne={class:"text-base text-muted max-w-3xl"},Re={key:0},Ve={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ae={class:"flex items-center justify-between"},Ie={class:"text-2xl font-bold"},Oe={class:"flex items-center justify-between"},Pe={class:"text-2xl font-bold"},Ke={class:"flex items-center justify-between"},Ge={class:"text-2xl font-bold"},Je={class:"flex items-center justify-between"},Qe={class:"text-2xl font-bold"},Xe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},qe={class:"lg:col-span-2 space-y-6"},He={class:"text-xl font-semibold text-highlighted flex items-center gap-2"},We={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Ye={class:"space-y-1"},Ze={class:"flex items-center gap-2 text-sm text-muted"},et={class:"font-medium text-highlighted"},tt={class:"space-y-1"},st={class:"flex items-center gap-2 text-sm text-muted"},ot={class:"font-medium text-highlighted"},lt={class:"space-y-1"},it={class:"flex items-center gap-2 text-sm text-muted"},at={class:"font-medium text-highlighted"},nt={class:"space-y-1"},rt={class:"flex items-center gap-2 text-sm text-muted"},dt={class:"font-medium text-highlighted"},ct={key:0,class:"space-y-1 sm:col-span-2"},ut={class:"flex items-center gap-2 text-sm text-muted"},mt={class:"font-medium text-highlighted font-mono text-sm break-all"},pt={key:1,class:"space-y-1 sm:col-span-2"},xt={class:"flex items-center gap-2 text-sm text-muted"},_t={class:"font-medium text-highlighted font-mono text-sm break-all"},ft={class:"text-xl font-semibold text-highlighted flex items-center gap-2"},vt={class:"font-medium text-highlighted"},ht={class:"text-muted font-mono text-sm"},gt={class:"text-xl font-semibold text-highlighted flex items-center gap-2"},yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},bt={class:"text-xs text-muted mb-1"},kt={class:"font-medium text-highlighted break-words"},wt={class:"text-xl font-semibold text-highlighted flex items-center gap-2"},zt={class:"space-y-3"},Et={class:"space-y-6"},Dt={class:"text-xl font-semibold text-highlighted flex items-center gap-2"},Ct={class:"space-y-4"},jt={class:"p-3 bg-muted/10 rounded-lg"},$t={class:"font-mono text-sm text-highlighted break-all"},Ft={class:"font-medium text-highlighted"},Ut={class:"text-xs text-muted mt-1"},Bt={class:"font-medium text-highlighted"},Tt={class:"text-xs text-muted mt-1"},St={class:"pt-4 border-t border-default"},Lt={class:"text-xl font-semibold text-highlighted flex items-center gap-2"},Mt={class:"space-y-2"},Nt={class:"text-xl font-semibold text-highlighted flex items-center gap-2"},Rt={class:"space-y-3"},Vt={class:"p-2 bg-muted/10 rounded font-mono text-xs break-all"},At={class:"font-medium text-highlighted"},It={class:"font-medium text-highlighted"},Ot={class:"space-y-4"},Pt={class:"p-3 bg-muted/10 rounded-lg"},Kt={class:"font-mono text-sm break-all"},Gt={class:"flex justify-end gap-2"},Jt={class:"space-y-4"},Qt={class:"flex items-center gap-2 p-3 bg-muted/10 rounded-lg"},Xt={class:"font-mono text-sm text-highlighted"},qt={key:0,class:"flex items-center justify-center py-12"},Ht={key:1,class:"space-y-2"},Wt={class:"flex items-center gap-3 p-2"},Yt={class:"flex items-center justify-between p-2"},Zt={class:"flex items-center gap-3 flex-1 min-w-0"},es={class:"flex-1 min-w-0"},ts={class:"font-medium truncate"},ss={class:"flex items-center gap-3 text-xs text-muted mt-0.5"},os={key:0},ls={key:1,class:"text-center py-12"},is={key:2,class:"text-sm text-muted"},as={class:"flex justify-end gap-2"},zs=oe({__name:"[id]",setup(ns){const G=le(),U=ie(),b=ge(),g=ae(),k=L(()=>parseInt(G.params.id)),o=f(null),B=f(!0),E=f(null),D=f(!1),y=f(!1),T=f(!1),C=f(!1),J=f(""),_=f(null),S=f(!1);async function Q(){B.value=!0,E.value=null;try{const l=await b.forensicExports.get(k.value);o.value=l}catch(l){E.value=l.message||"Failed to load export",console.error("Error loading export:",l)}finally{B.value=!1}}async function N(){if(o.value){D.value=!0;try{const l=await b.forensicExports.verify(k.value);l.exists?(g.add({title:"Export Verified",description:"The export folder exists on disk",color:"success"}),o.value.last_verified_at=l.verified_at):g.add({title:"Export Not Found",description:"The export folder no longer exists on disk",color:"error"})}catch(l){g.add({title:"Verification Failed",description:l.message||"Unable to verify export",color:"error"})}finally{D.value=!1}}}async function X(){if(o.value){T.value=!0;try{await b.forensicExports.delete(k.value),g.add({title:"Export Record Deleted",description:"The database record has been removed (files remain on disk)",color:"success"}),U.push("/forensic-exports")}catch(l){g.add({title:"Delete Failed",description:l.message||"Unable to delete export",color:"error"})}finally{T.value=!1,y.value=!1}}}function q(){if(!o.value)return;const l=b.forensicExports.getReportUrl(k.value);window.open(l,"_blank")}async function H(){C.value=!0,await R("")}async function R(l){S.value=!0,J.value=l;try{_.value=await b.forensicExports.listFiles(k.value,l)}catch(t){g.add({title:"Failed to Load Files",description:t.message||"Unable to list files",color:"error"})}finally{S.value=!1}}async function V(l){await R(l)}function A(l){if(!l||l===0)return"0 B";const t=1024,m=["B","KB","MB","GB","TB"],x=Math.floor(Math.log(l)/Math.log(t));return Math.round(l/Math.pow(t,x)*100)/100+" "+m[x]}function j(l){return l?new Date(l).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function I(l){return l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}function $(l){if(!l)return"Never";const t=new Date(l),x=Math.floor((new Date().getTime()-t.getTime())/1e3);return x<60?"just now":x<3600?`${Math.floor(x/60)} minutes ago`:x<86400?`${Math.floor(x/3600)} hours ago`:x<604800?`${Math.floor(x/86400)} days ago`:I(l)}const W=L(()=>{const l=o.value?.export_status?.toLowerCase();return l==="completed"?"success":l==="partial"?"warning":l==="failed"?"error":"neutral"}),Y=L(()=>o.value?.problems_json&&o.value.problems_json.length>0),Z=[{accessorKey:"name",header:"Option"},{accessorKey:"value",header:"Value"}];return ne(()=>{Q()}),(l,t)=>{const m=de,x=ue,r=re,p=me,F=pe,ee=xe,O=_e,te=fe,P=ve,se=he;return d(),c(z,null,[s(te,null,{header:n(()=>[s(x,{title:o.value?.folder_name||"Forensic Export"},{leading:n(()=>[s(m,{icon:"i-lucide-arrow-left",color:"neutral",variant:"ghost",onClick:t[0]||(t[0]=a=>K(U).push("/forensic-exports"))})]),trailing:n(()=>[o.value?(d(),c("div",ye,[s(m,{label:"Verify Export",icon:"i-lucide-check-circle",color:"success",variant:"soft",loading:D.value,onClick:N},null,8,["loading"]),s(m,{label:"Delete Record",icon:"i-lucide-trash-2",color:"error",variant:"soft",onClick:t[1]||(t[1]=a=>y.value=!0)})])):u("",!0)]),_:1},8,["title"])]),body:n(()=>[e("div",be,[B.value?(d(),c("div",ke,[e("div",we,[s(r,{name:"i-lucide-loader-circle",class:"size-12 text-primary animate-spin mx-auto"}),t[9]||(t[9]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Loading export..."),e("p",{class:"text-sm text-muted"},"Please wait while we fetch the export details")],-1))])])):E.value||!o.value?(d(),c("div",ze,[s(p,{class:"max-w-md"},{default:n(()=>[e("div",Ee,[s(r,{name:"i-lucide-alert-circle",class:"size-16 text-error mx-auto"}),e("div",null,[t[10]||(t[10]=e("h3",{class:"text-xl font-bold text-highlighted mb-2"},"Error Loading Export",-1)),e("p",De,i(E.value||"Export not found"),1)]),s(m,{label:"Back to Exports",icon:"i-lucide-arrow-left",color:"primary",onClick:t[2]||(t[2]=a=>K(U).push("/forensic-exports"))})])]),_:1})])):o.value?(d(),c(z,{key:2},[e("div",Ce,[e("div",je,[e("div",$e,[e("div",Fe,[s(r,{name:"i-lucide-hard-drive",class:"size-10 text-primary"})]),e("div",Ue,[e("div",Be,[e("h1",Te,i(o.value.folder_name||"Unknown Export"),1),o.value.export_status?(d(),v(F,{key:0,label:o.value.export_status,color:W.value,variant:"soft",size:"lg",class:"capitalize"},null,8,["label","color"])):u("",!0)]),e("div",Se,[o.value.export_uuid?(d(),c("div",Le,[s(r,{name:"i-lucide-fingerprint",class:"size-4"}),e("span",Me,i(o.value.export_uuid),1)])):u("",!0)]),e("p",Ne,[h(" Forensic export discovered "+i($(o.value.discovered_at))+" ",1),o.value.last_verified_at?(d(),c("span",Re," â€¢ Last verified "+i($(o.value.last_verified_at)),1)):u("",!0)])])])]),e("div",Ve,[s(p,{ui:{body:"p-4 space-y-2"}},{default:n(()=>[e("div",Ae,[s(r,{name:"i-lucide-database",class:"size-8 text-primary"})]),e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm text-muted"},"Total Records",-1)),e("p",Ie,i(o.value.total_records?.toLocaleString()||"N/A"),1)])]),_:1}),s(p,{ui:{body:"p-4 space-y-2"}},{default:n(()=>[e("div",Oe,[s(r,{name:"i-lucide-file-output",class:"size-8 text-info"})]),e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm text-muted"},"Exported Records",-1)),e("p",Pe,i(o.value.exported_records?.toLocaleString()||"N/A"),1)])]),_:1}),s(p,{ui:{body:"p-4 space-y-2"}},{default:n(()=>[e("div",Ke,[s(r,{name:"i-lucide-paperclip",class:"size-8 text-success"})]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm text-muted"},"Attachments",-1)),e("p",Ge,i(o.value.num_attachments?.toLocaleString()||"0"),1)])]),_:1}),s(p,{ui:{body:"p-4 space-y-2"}},{default:n(()=>[e("div",Je,[s(r,{name:"i-lucide-hard-drive",class:"size-8 text-warning"})]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm text-muted"},"Total Size",-1)),e("p",Qe,i(A(o.value.size_bytes)),1)])]),_:1})])]),e("div",Xe,[e("div",qe,[s(p,null,{header:n(()=>[e("h2",He,[s(r,{name:"i-lucide-info",class:"size-5"}),t[15]||(t[15]=h(" Export Information ",-1))])]),default:n(()=>[e("div",We,[e("div",Ye,[e("div",Ze,[s(r,{name:"i-lucide-tag",class:"size-4"}),t[16]||(t[16]=e("span",null,"AXIOM Version",-1))]),e("p",et,i(o.value.axiom_version||"N/A"),1)]),e("div",tt,[e("div",st,[s(r,{name:"i-lucide-clock",class:"size-4"}),t[17]||(t[17]=e("span",null,"Duration",-1))]),e("p",ot,i(o.value.export_duration||"N/A"),1)]),e("div",lt,[e("div",it,[s(r,{name:"i-lucide-calendar-plus",class:"size-4"}),t[18]||(t[18]=e("span",null,"Export Started",-1))]),e("p",at,i(j(o.value.export_start_date)),1)]),e("div",nt,[e("div",rt,[s(r,{name:"i-lucide-calendar-check",class:"size-4"}),t[19]||(t[19]=e("span",null,"Export Completed",-1))]),e("p",dt,i(j(o.value.export_end_date)),1)]),o.value.case_directory?(d(),c("div",ct,[e("div",ut,[s(r,{name:"i-lucide-folder",class:"size-4"}),t[20]||(t[20]=e("span",null,"Case Directory",-1))]),e("p",mt,i(o.value.case_directory),1)])):u("",!0),o.value.case_storage_location?(d(),c("div",pt,[e("div",xt,[s(r,{name:"i-lucide-database",class:"size-4"}),t[21]||(t[21]=e("span",null,"Storage Location",-1))]),e("p",_t,i(o.value.case_storage_location),1)])):u("",!0)])]),_:1}),o.value.export_options_json&&o.value.export_options_json.length>0?(d(),v(p,{key:0},{header:n(()=>[e("h2",ft,[s(r,{name:"i-lucide-settings",class:"size-5"}),t[22]||(t[22]=h(" Export Options ",-1)),s(F,{label:String(o.value.export_options_json.length),variant:"soft",color:"primary"},null,8,["label"])])]),default:n(()=>[s(ee,{columns:Z,data:o.value.export_options_json,ui:{td:{base:"max-w-0 truncate"}}},{"name-data":n(({row:a})=>[e("span",vt,i(a.name),1)]),"value-data":n(({row:a})=>[e("span",ht,i(a.value),1)]),_:1},8,["data"])]),_:1})):u("",!0),o.value.summary_json&&o.value.summary_json.length>0?(d(),v(p,{key:1},{header:n(()=>[e("h2",gt,[s(r,{name:"i-lucide-list",class:"size-5"}),t[23]||(t[23]=h(" Export Summary ",-1)),s(F,{label:String(o.value.summary_json.length),variant:"soft",color:"primary"},null,8,["label"])])]),default:n(()=>[e("div",yt,[(d(!0),c(z,null,M(o.value.summary_json,(a,w)=>(d(),c("div",{key:w,class:"p-3 bg-muted/5 rounded-lg"},[e("p",bt,i(a.name),1),e("p",kt,i(a.value),1)]))),128))])]),_:1})):u("",!0),Y.value?(d(),v(p,{key:2},{header:n(()=>[e("h2",wt,[s(r,{name:"i-lucide-alert-triangle",class:"size-5 text-error"}),t[24]||(t[24]=h(" Problems ",-1)),s(F,{label:String(o.value.problems_json.length),variant:"soft",color:"error"},null,8,["label"])])]),default:n(()=>[e("div",zt,[(d(!0),c(z,null,M(o.value.problems_json,(a,w)=>(d(),v(O,{key:w,color:"error",variant:"soft",icon:"i-lucide-alert-circle",title:a.title||`Problem ${w+1}`,description:a.description||JSON.stringify(a)},null,8,["title","description"]))),128))])]),_:1})):u("",!0)]),e("div",Et,[s(p,null,{header:n(()=>[e("h2",Dt,[s(r,{name:"i-lucide-server",class:"size-5"}),t[25]||(t[25]=h(" System Information ",-1))])]),default:n(()=>[e("div",Ct,[e("div",null,[t[26]||(t[26]=e("p",{class:"text-xs text-muted mb-2"},"Folder Path",-1)),e("div",jt,[e("p",$t,i(o.value.folder_path),1)])]),e("div",null,[t[27]||(t[27]=e("p",{class:"text-xs text-muted mb-1"},"Discovered",-1)),e("p",Ft,i(j(o.value.discovered_at)),1),e("p",Ut,i($(o.value.discovered_at)),1)]),e("div",null,[t[28]||(t[28]=e("p",{class:"text-xs text-muted mb-1"},"Last Verified",-1)),e("p",Bt,i(j(o.value.last_verified_at)),1),e("p",Tt,i($(o.value.last_verified_at)),1)]),e("div",St,[s(m,{label:"Verify Export Exists",icon:"i-lucide-check-circle",color:"success",variant:"outline",block:"",loading:D.value,onClick:N},null,8,["loading"])])])]),_:1}),s(p,null,{header:n(()=>[e("h2",Lt,[s(r,{name:"i-lucide-zap",class:"size-5"}),t[29]||(t[29]=h(" Quick Actions ",-1))])]),default:n(()=>[e("div",Mt,[s(m,{label:"View in File Browser",icon:"i-lucide-folder-open",color:"neutral",variant:"outline",block:"",onClick:H}),s(m,{label:"Open Report.html",icon:"i-lucide-file-text",color:"neutral",variant:"outline",block:"",onClick:q}),s(m,{label:"Delete Record",icon:"i-lucide-trash-2",color:"error",variant:"outline",block:"",onClick:t[3]||(t[3]=a=>y.value=!0)})])]),_:1}),o.value.export_uuid?(d(),v(p,{key:0},{header:n(()=>[e("h2",Nt,[s(r,{name:"i-lucide-file-json",class:"size-5"}),t[30]||(t[30]=h(" Metadata ",-1))])]),default:n(()=>[e("div",Rt,[e("div",null,[t[31]||(t[31]=e("p",{class:"text-xs text-muted mb-1"},"Export UUID",-1)),e("div",Vt,i(o.value.export_uuid),1)]),e("div",null,[t[32]||(t[32]=e("p",{class:"text-xs text-muted mb-1"},"Database ID",-1)),e("p",At,i(o.value.id),1)]),e("div",null,[t[33]||(t[33]=e("p",{class:"text-xs text-muted mb-1"},"Case ID",-1)),e("p",It,i(o.value.case_id),1)])])]),_:1})):u("",!0)])])],64)):u("",!0)])]),_:1}),s(se,null,{default:n(()=>[s(P,{open:y.value,"onUpdate:open":t[5]||(t[5]=a=>y.value=a),title:"Delete Export Record",icon:"i-lucide-trash-2"},{body:n(()=>[e("div",Ot,[t[35]||(t[35]=e("p",{class:"text-muted"}," Are you sure you want to delete this export record? This action cannot be undone. ",-1)),s(O,{color:"warning",variant:"soft",icon:"i-lucide-alert-triangle",title:"Files will remain on disk",description:"Deleting this record only removes it from the database. The export folder and all its files will remain on your filesystem."}),e("div",Pt,[t[34]||(t[34]=e("p",{class:"text-xs text-muted mb-1"},"Export Folder",-1)),e("p",Kt,i(o.value?.folder_path),1)])])]),footer:n(()=>[e("div",Gt,[s(m,{label:"Cancel",color:"neutral",variant:"ghost",onClick:t[4]||(t[4]=a=>y.value=!1)}),s(m,{label:"Delete Record",icon:"i-lucide-trash-2",color:"error",loading:T.value,onClick:X},null,8,["loading"])])]),_:1},8,["open"]),s(P,{open:C.value,"onUpdate:open":t[8]||(t[8]=a=>C.value=a),title:"File Browser",ui:{content:"max-w-5xl"}},{body:n(()=>[e("div",Jt,[e("div",Qt,[s(r,{name:"i-lucide-folder",class:"size-5 text-primary"}),e("span",Xt,i(_.value?.current_path||"/"),1)]),S.value?(d(),c("div",qt,[s(r,{name:"i-lucide-loader-2",class:"size-8 text-primary animate-spin"})])):_.value?(d(),c("div",Ht,[_.value.parent_path!==null?(d(),v(p,{key:0,class:"hover:bg-muted/5 cursor-pointer transition-colors",onClick:t[6]||(t[6]=a=>V(_.value.parent_path))},{default:n(()=>[e("div",Wt,[s(r,{name:"i-lucide-corner-up-left",class:"size-5 text-muted"}),t[36]||(t[36]=e("span",{class:"font-medium text-muted"},"..",-1))])]),_:1})):u("",!0),(d(!0),c(z,null,M(_.value.items,a=>(d(),v(p,{key:a.path,class:"hover:bg-muted/5 cursor-pointer transition-colors",onClick:w=>a.is_directory?V(a.path):null},{default:n(()=>[e("div",Yt,[e("div",Zt,[s(r,{name:a.is_directory?"i-lucide-folder":"i-lucide-file",class:ce([a.is_directory?"text-primary":"text-muted","size-5 flex-shrink-0"])},null,8,["name","class"]),e("div",es,[e("p",ts,i(a.name),1),e("div",ss,[a.is_directory?u("",!0):(d(),c("span",os,i(A(a.size||0)),1)),e("span",null,i(I(a.modified)),1)])])]),a.is_directory?(d(),v(r,{key:0,name:"i-lucide-chevron-right",class:"size-5 text-muted flex-shrink-0"})):u("",!0)])]),_:2},1032,["onClick"]))),128)),_.value.items.length===0?(d(),c("div",ls,[s(r,{name:"i-lucide-folder-open",class:"size-12 text-muted/50 mb-3"}),t[37]||(t[37]=e("p",{class:"text-muted"},"This folder is empty",-1))])):u("",!0)])):u("",!0),_.value?(d(),c("div",is," Showing "+i(_.value.total)+" item"+i(_.value.total!==1?"s":""),1)):u("",!0)])]),footer:n(()=>[e("div",as,[s(m,{label:"Close",color:"neutral",variant:"outline",onClick:t[7]||(t[7]=a=>C.value=!1)})])]),_:1},8,["open"])]),_:1})],64)}}});export{zs as default};
