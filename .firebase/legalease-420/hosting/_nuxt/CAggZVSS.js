import{d as I,u as F,c as b,o as f,w as d,r as h,J as k,m as U,a,P as V,b as re,t as ue,h as de,f as C,ag as ce,ah as pe,K as T,e as N,a0 as me,Q as W,s as p,M as S,L as z,T as M,H as fe,ai as ge,y as ve,z as be,A as _e,C as H,E as A,j as E,D as J,F as G,G as ye,a2 as he,U as Pe,N as Ce,aj as w,R as we}from"#entry";import{_ as xe}from"./CDi83SG1.js";import{_ as qe}from"./DkGyBOcx.js";import{_ as Ie}from"./Ch8iEGbY.js";import{_ as X}from"./zGKBPmqO.js";import{_ as $e}from"./B7vB9rem.js";import{o as Se,s as Q,_ as Re}from"./CCDg-5zE.js";import{_ as Y}from"./DbmbX4Z1.js";import{_ as Ue}from"./CJ9Ym_Vo.js";import{_ as Fe}from"./jxpb6RCH.js";import{_ as Ve}from"./DE4e927w.js";import{u as Ae,_ as Ne,g as ze}from"./Di12GvVr.js";import{_ as Me}from"./DK_M2cpq.js";import{u as ke}from"./LeU0uzmo.js";import"./CXFRORYb.js";import"./Dip1mGGo.js";import"./CxKOMpoR.js";import"./CHZYgNjC.js";import"./sTZnGM-8.js";import"./C6cQ_fTz.js";import"./BMuCWYOq.js";import"./BSuOfW5l.js";import"./DvYBZqIB.js";import"./BGmxVXu4.js";import"./U9gof1xZ.js";import"./Bc20tCqw.js";import"./CGV-9Xko.js";import"./CqOTKR6S.js";import"./BV1PiVJJ.js";import"./Cf6gTX0p.js";import"./BstbYvQo.js";import"./ConTs2Wn.js";import"./eM47yAaV.js";var Le=I({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=t;return F(),(e,o)=>(f(),b(a(V),U(s,{"data-type":"ellipsis"}),{default:d(()=>[h(e.$slots,"default",{},()=>[o[0]||(o[0]=k("â€¦"))])]),_:3},16))}}),Be=Le;const[B,De]=re("PaginationRoot");var Ee=I({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(t,{emit:s}){const e=t,o=s,{siblingCount:i,disabled:l,showEdges:n}=ue(e);F();const m=de(e,"page",o,{defaultValue:e.defaultPage,passive:e.page===void 0}),_=C(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return De({page:m,onPageChange(r){m.value=r},pageCount:_,siblingCount:i,disabled:l,showEdges:n}),(r,P)=>(f(),b(a(V),{as:r.as,"as-child":r.asChild},{default:d(()=>[h(r.$slots,"default",{page:a(m),pageCount:_.value})]),_:3},8,["as","as-child"]))}}),je=Ee,Te=I({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const s=t,e=B();F();const o=C(()=>e.page.value===1||e.disabled.value);return(i,l)=>(f(),b(a(V),U(s,{"aria-label":"First Page",type:i.as==="button"?"button":void 0,disabled:o.value,onClick:l[0]||(l[0]=n=>!o.value&&a(e).onPageChange(1))}),{default:d(()=>[h(i.$slots,"default",{},()=>[l[1]||(l[1]=k("First page"))])]),_:3},16,["type","disabled"]))}}),Ke=Te,Oe=I({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const s=t,e=B();F();const o=C(()=>e.page.value===e.pageCount.value||e.disabled.value);return(i,l)=>(f(),b(a(V),U(s,{"aria-label":"Last Page",type:i.as==="button"?"button":void 0,disabled:o.value,onClick:l[0]||(l[0]=n=>!o.value&&a(e).onPageChange(a(e).pageCount.value))}),{default:d(()=>[h(i.$slots,"default",{},()=>[l[1]||(l[1]=k("Last page"))])]),_:3},16,["type","disabled"]))}}),He=Oe;function R(t,s){const e=s-t+1;return Array.from({length:e},(o,i)=>i+t)}function Je(t){return t.map(s=>typeof s=="number"?{type:"page",value:s}:{type:"ellipsis"})}const j="ellipsis";function Ge(t,s,e,o){const l=s,n=Math.max(t-e,1),m=Math.min(t+e,l);if(o){const r=Math.min(2*e+5,s)-2,P=n>3&&Math.abs(l-r-1+1)>2&&Math.abs(n-1)>2,x=m<l-2&&Math.abs(l-r)>2&&Math.abs(l-m)>2;if(!P&&x)return[...R(1,r),j,l];if(P&&!x){const g=R(l-r+1,l);return[1,j,...g]}if(P&&x){const g=R(n,m);return[1,j,...g,j,l]}return R(1,l)}else{const _=e*2+1;return s<_?R(1,l):t<=e+1?R(1,_):s-t<=e?R(s-_+1,l):R(n,m)}}var Qe=I({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=t;F();const e=B(),o=C(()=>Je(Ge(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(i,l)=>(f(),b(a(V),ce(pe(s)),{default:d(()=>[h(i.$slots,"default",{items:o.value})]),_:3},16))}}),We=Qe,Xe=I({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const s=t;F();const e=B(),o=C(()=>e.page.value===s.value),i=C(()=>e.disabled.value);return(l,n)=>(f(),b(a(V),U(s,{"data-type":"page","aria-label":`Page ${l.value}`,"aria-current":o.value?"page":void 0,"data-selected":o.value?"true":void 0,disabled:i.value,type:l.as==="button"?"button":void 0,onClick:n[0]||(n[0]=m=>!i.value&&a(e).onPageChange(l.value))}),{default:d(()=>[h(l.$slots,"default",{},()=>[k(T(l.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Ye=Xe,Ze=I({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const s=t;F();const e=B(),o=C(()=>e.page.value===e.pageCount.value||e.disabled.value);return(i,l)=>(f(),b(a(V),U(s,{"aria-label":"Next Page",type:i.as==="button"?"button":void 0,disabled:o.value,onClick:l[0]||(l[0]=n=>!o.value&&a(e).onPageChange(a(e).page.value+1))}),{default:d(()=>[h(i.$slots,"default",{},()=>[l[1]||(l[1]=k("Next page"))])]),_:3},16,["type","disabled"]))}}),et=Ze,tt=I({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const s=t;F();const e=B(),o=C(()=>e.page.value===1||e.disabled.value);return(i,l)=>(f(),b(a(V),U(s,{"aria-label":"Previous Page",type:i.as==="button"?"button":void 0,disabled:o.value,onClick:l[0]||(l[0]=n=>!o.value&&a(e).onPageChange(a(e).page.value-1))}),{default:d(()=>[h(i.$slots,"default",{},()=>[l[1]||(l[1]=k("Prev page"))])]),_:3},16,["type","disabled"]))}}),at=tt;const lt={class:"flex justify-end gap-2"},st=I({__name:"AddModal",setup(t){const s=Se({name:Q().min(2,"Too short"),email:Q().email("Invalid email")}),e=N(!1),o=me({name:void 0,email:void 0}),i=W();async function l(n){i.add({title:"Success",description:`New customer ${n.data.name} added`,color:"success"}),e.value=!1}return(n,m)=>{const _=S,r=X,P=$e,x=Re,y=Y;return f(),b(y,{open:a(e),"onUpdate:open":m[3]||(m[3]=g=>M(e)?e.value=g:null),title:"New customer",description:"Add a new customer to the database"},{body:d(()=>[p(x,{schema:a(s),state:a(o),class:"space-y-4",onSubmit:l},{default:d(()=>[p(P,{label:"Name",placeholder:"John Doe",name:"name"},{default:d(()=>[p(r,{modelValue:a(o).name,"onUpdate:modelValue":m[0]||(m[0]=g=>a(o).name=g),class:"w-full"},null,8,["modelValue"])]),_:1}),p(P,{label:"Email",placeholder:"john.doe@example.com",name:"email"},{default:d(()=>[p(r,{modelValue:a(o).email,"onUpdate:modelValue":m[1]||(m[1]=g=>a(o).email=g),class:"w-full"},null,8,["modelValue"])]),_:1}),z("div",lt,[p(_,{label:"Cancel",color:"neutral",variant:"subtle",onClick:m[2]||(m[2]=g=>e.value=!1)}),p(_,{label:"Create",color:"primary",variant:"solid",type:"submit"})])]),_:1},8,["schema","state"])]),default:d(()=>[p(_,{label:"New customer",icon:"i-lucide-plus"})]),_:1},8,["open"])}}}),ot=Object.assign(st,{__name:"CustomersAddModal"}),it={class:"flex justify-end gap-2"},nt=I({__name:"DeleteModal",props:{count:{default:0}},setup(t){const s=N(!1);async function e(){await new Promise(o=>setTimeout(o,1e3)),s.value=!1}return(o,i)=>{const l=S,n=Y;return f(),b(n,{open:a(s),"onUpdate:open":i[1]||(i[1]=m=>M(s)?s.value=m:null),title:`Delete ${t.count} customer${t.count>1?"s":""}`,description:"Are you sure, this action cannot be undone."},{body:d(()=>[z("div",it,[p(l,{label:"Cancel",color:"neutral",variant:"subtle",onClick:i[0]||(i[0]=m=>s.value=!1)}),p(l,{label:"Delete",color:"error",variant:"solid","loading-auto":"",onClick:e})])]),default:d(()=>[h(o.$slots,"default")]),_:3},8,["open","title"])}}}),rt=Object.assign(nt,{__name:"CustomersDeleteModal"}),ut={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},dt={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:[String,Object],required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},lastIcon:{type:[String,Object],required:!1},ellipsisIcon:{type:[String,Object],required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(t,{emit:s}){const e=t,o=s,i=fe(),{dir:l}=ge(),n=ve(),m=be(_e(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),o),_=C(()=>e.firstIcon||(l.value==="rtl"?n.ui.icons.chevronDoubleRight:n.ui.icons.chevronDoubleLeft)),r=C(()=>e.prevIcon||(l.value==="rtl"?n.ui.icons.chevronRight:n.ui.icons.chevronLeft)),P=C(()=>e.nextIcon||(l.value==="rtl"?n.ui.icons.chevronLeft:n.ui.icons.chevronRight)),x=C(()=>e.lastIcon||(l.value==="rtl"?n.ui.icons.chevronDoubleLeft:n.ui.icons.chevronDoubleRight)),y=C(()=>H({extend:H(ut),...n.ui?.pagination||{}})());return(g,O)=>(f(),b(a(je),U(a(m),{class:y.value.root({class:[e.ui?.root,e.class]})}),{default:d(({page:$,pageCount:D})=>[p(a(We),{class:A(y.value.list({class:e.ui?.list}))},{default:d(({items:L})=>[t.showControls||i.first?(f(),b(a(Ke),{key:0,"as-child":"",class:A(y.value.first({class:e.ui?.first}))},{default:d(()=>[h(g.$slots,"first",{},()=>[p(S,{color:t.color,variant:t.variant,size:t.size,icon:_.value,to:t.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):E("",!0),t.showControls||i.prev?(f(),b(a(at),{key:1,"as-child":"",class:A(y.value.prev({class:e.ui?.prev}))},{default:d(()=>[h(g.$slots,"prev",{},()=>[p(S,{color:t.color,variant:t.variant,size:t.size,icon:r.value,to:$>1?t.to?.($-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):E("",!0),(f(!0),J(G,null,ye(L,(q,u)=>(f(),J(G,{key:u},[q.type==="page"?(f(),b(a(Ye),{key:0,"as-child":"",value:q.value,class:A(y.value.item({class:e.ui?.item}))},{default:d(()=>[h(g.$slots,"item",U({ref_for:!0},{item:q,index:u,page:$,pageCount:D}),()=>[p(S,{color:$===q.value?t.activeColor:t.color,variant:$===q.value?t.activeVariant:t.variant,size:t.size,label:String(q.value),ui:{label:y.value.label()},to:t.to?.(q.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(f(),b(a(Be),{key:1,"as-child":"",class:A(y.value.ellipsis({class:e.ui?.ellipsis}))},{default:d(()=>[h(g.$slots,"ellipsis",{},()=>[p(S,{as:"div",color:t.color,variant:t.variant,size:t.size,icon:t.ellipsisIcon||a(n).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["class"]))],64))),128)),t.showControls||i.next?(f(),b(a(et),{key:2,"as-child":"",class:A(y.value.next({class:e.ui?.next}))},{default:d(()=>[h(g.$slots,"next",{},()=>[p(S,{color:t.color,variant:t.variant,size:t.size,icon:P.value,to:$<D?t.to?.($+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):E("",!0),t.showControls||i.last?(f(),b(a(He),{key:3,"as-child":"",class:A(y.value.last({class:e.ui?.last}))},{default:d(()=>[h(g.$slots,"last",{},()=>[p(S,{color:t.color,variant:t.variant,size:t.size,icon:x.value,to:t.to?.(D)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):E("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},ct={class:"flex flex-wrap items-center justify-between gap-1.5"},pt={class:"flex flex-wrap items-center gap-1.5"},mt={class:"flex items-center justify-between gap-3 border-t border-default pt-4 mt-auto"},ft={class:"text-sm text-muted"},gt={class:"flex items-center gap-1.5"},Qt=I({__name:"customers",async setup(t){let s,e;const o=we,i=S,l=xe,n=qe,m=Ie,_=W(),r=he("table"),P=N([{id:"email",value:""}]),x=N(),y=N({1:!0}),{data:g,status:O}=([s,e]=Pe(()=>ke("/api/customers",{lazy:!0},"$6qzunmRhlq")),s=await s,e(),s);function $(u){return[{type:"label",label:"Actions"},{label:"Copy customer ID",icon:"i-lucide-copy",onSelect(){navigator.clipboard.writeText(u.original.id.toString()),_.add({title:"Copied to clipboard",description:"Customer ID copied to clipboard"})}},{type:"separator"},{label:"View customer details",icon:"i-lucide-list"},{label:"View customer payments",icon:"i-lucide-wallet"},{type:"separator"},{label:"Delete customer",icon:"i-lucide-trash",color:"error",onSelect(){_.add({title:"Customer deleted",description:"The customer has been deleted."})}}]}const D=[{id:"select",header:({table:u})=>w(m,{modelValue:u.getIsSomePageRowsSelected()?"indeterminate":u.getIsAllPageRowsSelected(),"onUpdate:modelValue":c=>u.toggleAllPageRowsSelected(!!c),ariaLabel:"Select all"}),cell:({row:u})=>w(m,{modelValue:u.getIsSelected(),"onUpdate:modelValue":c=>u.toggleSelected(!!c),ariaLabel:"Select row"})},{accessorKey:"id",header:"ID"},{accessorKey:"name",header:"Name",cell:({row:u})=>w("div",{class:"flex items-center gap-3"},[w(o,{...u.original.avatar,size:"lg"}),w("div",void 0,[w("p",{class:"font-medium text-highlighted"},u.original.name),w("p",{class:""},`@${u.original.name}`)])])},{accessorKey:"email",header:({column:u})=>{const c=u.getIsSorted();return w(i,{color:"neutral",variant:"ghost",label:"Email",icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>u.toggleSorting(u.getIsSorted()==="asc")})}},{accessorKey:"location",header:"Location",cell:({row:u})=>u.original.location},{accessorKey:"status",header:"Status",filterFn:"equals",cell:({row:u})=>{const c={subscribed:"success",unsubscribed:"error",bounced:"warning"}[u.original.status];return w(l,{class:"capitalize",variant:"subtle",color:c},()=>u.original.status)}},{id:"actions",cell:({row:u})=>w("div",{class:"text-right"},w(n,{content:{align:"end"},items:$(u)},()=>w(i,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"})))}],L=N("all");Ce(()=>L.value,u=>{if(!r?.value?.tableApi)return;const c=r.value.tableApi.getColumn("status");c&&(u==="all"?c.setFilterValue(void 0):c.setFilterValue(u))});const q=N({pageIndex:0,pageSize:10});return(u,c)=>{const Z=ot,ee=Ue,te=X,ae=Fe,le=rt,se=Ve,oe=Ne,ie=dt,ne=Me;return f(),b(ne,{id:"customers"},{header:d(()=>[p(ee,{title:"Customers"},{right:d(()=>[p(Z)]),_:1})]),body:d(()=>[z("div",ct,[p(te,{"model-value":a(r)?.tableApi?.getColumn("email")?.getFilterValue(),class:"max-w-sm",icon:"i-lucide-search",placeholder:"Filter emails...","onUpdate:modelValue":c[0]||(c[0]=v=>a(r)?.tableApi?.getColumn("email")?.setFilterValue(v))},null,8,["model-value"]),z("div",pt,[p(le,{count:a(r)?.tableApi?.getFilteredSelectedRowModel().rows.length},{default:d(()=>[a(r)?.tableApi?.getFilteredSelectedRowModel().rows.length?(f(),b(a(i),{key:0,label:"Delete",color:"error",variant:"subtle",icon:"i-lucide-trash"},{trailing:d(()=>[p(ae,null,{default:d(()=>[k(T(a(r)?.tableApi?.getFilteredSelectedRowModel().rows.length),1)]),_:1})]),_:1})):E("",!0)]),_:1},8,["count"]),p(se,{modelValue:a(L),"onUpdate:modelValue":c[1]||(c[1]=v=>M(L)?L.value=v:null),items:[{label:"All",value:"all"},{label:"Subscribed",value:"subscribed"},{label:"Unsubscribed",value:"unsubscribed"},{label:"Bounced",value:"bounced"}],ui:{trailingIcon:"group-data-[state=open]:rotate-180 transition-transform duration-200"},placeholder:"Filter status",class:"min-w-28"},null,8,["modelValue"]),p(a(n),{items:a(r)?.tableApi?.getAllColumns().filter(v=>v.getCanHide()).map(v=>({label:a(Ae)(v.id),type:"checkbox",checked:v.getIsVisible(),onUpdateChecked(K){a(r)?.tableApi?.getColumn(v.id)?.toggleVisibility(!!K)},onSelect(K){K?.preventDefault()}})),content:{align:"end"}},{default:d(()=>[p(a(i),{label:"Display",color:"neutral",variant:"outline","trailing-icon":"i-lucide-settings-2"})]),_:1},8,["items"])])]),p(oe,{ref_key:"table",ref:r,"column-filters":a(P),"onUpdate:columnFilters":c[2]||(c[2]=v=>M(P)?P.value=v:null),"column-visibility":a(x),"onUpdate:columnVisibility":c[3]||(c[3]=v=>M(x)?x.value=v:null),"row-selection":a(y),"onUpdate:rowSelection":c[4]||(c[4]=v=>M(y)?y.value=v:null),pagination:a(q),"onUpdate:pagination":c[5]||(c[5]=v=>M(q)?q.value=v:null),"pagination-options":{getPaginationRowModel:a(ze)()},class:"shrink-0",data:a(g),columns:D,loading:a(O)==="pending",ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default"}},null,8,["column-filters","column-visibility","row-selection","pagination","pagination-options","data","loading"]),z("div",mt,[z("div",ft,T(a(r)?.tableApi?.getFilteredSelectedRowModel().rows.length||0)+" of "+T(a(r)?.tableApi?.getFilteredRowModel().rows.length||0)+" row(s) selected. ",1),z("div",gt,[p(ie,{"default-page":(a(r)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":a(r)?.tableApi?.getState().pagination.pageSize,total:a(r)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":c[6]||(c[6]=v=>a(r)?.tableApi?.setPageIndex(v-1))},null,8,["default-page","items-per-page","total"])])])]),_:1})}}});export{Qt as default};
